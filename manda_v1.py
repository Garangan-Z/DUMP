#Encrypted with Crypton 
#Created by Raka 
import marshal,zlib,base64 
exec(marshal.loads(zlib.decompress(base64.b32decode("IyBEZWNvbXBpbGUgYnkgUkFLQSBBTUFOREEKaW1wb3J0IHJlcXVlc3RzLGJzNCxzeXMsb3MscmFuZG9tLHRpbWUscmUsanNvbix1dWlkLHN1YnByb2Nlc3MKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHF1b3RlClAgPSAiXHgxYlswOzk3bSIgIyBQdXRpaApNID0gIlx4MWJbMDs5MW0iICMgTWVyYWgKSCA9ICJceDFiWzA7OTJtIiAjIEhpamF1CksgPSAiXHgxYlswOzkzbSIgIyBLdW5pbmcKQiA9ICJceDFiWzA7OTRtIiAjIEJpcnUKVSA9ICJceDFiWzA7OTVtIiAjIFVuZ3UKTyA9ICJceDFiWzA7OTZtIiAjIEJpcnUgTXVkYQpOID0gIlwwMzNbMG0iICAgICMgV2FybmEgTWF0aQpvayA9IFtdCmNwID0gW10KdHRsID0gW10KY3VycmVudCA9IGRhdGV0aW1lLm5vdygpCnRhID0gY3VycmVudC55ZWFyCmJ1ID0gY3VycmVudC5tb250aApoYSA9IGN1cnJlbnQuZGF5CmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyeSIsICIwMiI6ICJGZWJydWFyeSIsICIwMyI6ICJNYXJjaCIsICIwNCI6ICJBcHJpbCIsICIwNSI6ICJNYXkiLCAiMDYiOiAiSnVuZSIsICIwNyI6ICJKdWx5IiwgIjA4IjogIkF1Z3VzdCIsICIwOSI6ICJTZXB0ZW1iZXIiLCAiMTAiOiAiT2N0b2JlciIsICIxMSI6ICJOb3ZlbWJlciIsICIxMiI6ICJEZWNlbWJlciJ9CmJ1bGFuID0gWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQXVndXN0IiwgIlNlcHRlbWJlciIsICJPY3RvYmVyIiwgIk5vdmVtYmVyIiwgIkRlY2VtYmVyIl0KdHJ5OgogICAgaWYgYnUgPCAwIG9yIGJ1ID4gMTI6CiAgICAgICAgZXhpdCgpCiAgICBidVRlbXAgPSBidSAtIDEKZXhjZXB0IFZhbHVlRXJyb3I6CiAgICBleGl0KCkKb3AgPSBidWxhbltidVRlbXBdCnRhbmdnYWwgPSAoIiVzLSVzLSVzIiUoaGEsb3AsdGEpKQp1YV94aWFvbWkgID0gJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQkFOL0VNQTtGQkxDL2lkX0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XScKdWFfbm9raWEgICA9ICdub2tpYWMzLTAwLzUuMCAoMDcuMjApIHByb2ZpbGUvbWlkcC0yLjEgY29uZmlndXJhdGlvbi9jbGRjLTEuMSBtb3ppbGxhLzUuMCBhcHBsZXdlYmtpdC80MjArIChraHRtbCwgbGlrZSBnZWNrbykgc2FmYXJpLzQyMCsnCnVhX2FzdXMgICAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMDsgQVNVU19aMDBBRCBCdWlsZC9MUlgyMVYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8zNy4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nCnVhX2h1YXdlaSAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDguMS4wOyBIVUFXRUkgWTcgUFJJTUUgMjAxOSBCdWlsZC81ODg3MjA4KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40NTc3LjYyIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQkFOL0VNQTtGQkxDL2lkX0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XScKdWFfdml2byAgICA9ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IHZpdm8gMTkxOCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkzLjAuNDU3Ny42MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nCnVhX29wcG8gICAgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMS4xOyBBMzdmKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODkuMC40Mzg5LjEwNSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10nCnVhX3NhbXN1bmcgPSAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMDsgU00tRzkwMFAgQnVpbGQvTFJYMjFUOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzQzLjAuMjM1Ny4xMjEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzUuMC4wLjQ4LjI3MztdJwp1YV93aW5kb3dzID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40NTc3LjYzIFNhZmFyaS81MzcuMzYgW0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdJwpkZWYgamFsYW4oeik6CiAgICBmb3IgZSBpbiB6ICsgIlxuIjoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjA0KQpkZWYgbWxha3Uoeik6CiAgICBmb3IgZSBpbiB6ICsgIlxuIjoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjAzKQpkZWYgY2xlYXIoKToKICAgIGlmICJsaW51eCIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCk6b3Muc3lzdGVtKCJjbGVhciIpCiAgICBlbGlmICJ3aW4iIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOm9zLnN5c3RlbSgiY2xzIikKICAgIGVsc2U6b3Muc3lzdGVtKCJjbGVhciIpCmRlZiBiYW5uZXIoKToKICAgIHByaW50KCJcbiVzICAgIF9fwqDCoF9fX18gX19fX1_CoMKgX18qKioqKioqKioqX19fIF9fX19fICVzwq4gICAgXG4lcyAgIC_CoCBcL8KgICAvX18gICAgKS_CoMKgKV9fICBfX19fL8KgIC9fXyAgICApICBcbiVzICAvwqDCoCAgICAgL19fXykgICAvwqDCoF9fICApL8KgIF9fwqAgL19fXykgICAvIFxuJXMgL8KgwqAvXC8gIC8gIF9fICAgL8KgIC8gL8KgL8KgICAoXy8gLyAgX18gICAvIFxuJXMvX18vICAvXy8oX19fX19fL19fL8KgL18vKF9fX19fXy8oX19fX19fLyAgVjIuMC4xXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4lc-KVlOKVkOKVkOKXjeKepERlc2lnZW4gQnkgOiBSYWthIEFuZHJpYW4gVGFyYVxuJXPilaDilZDilZDil43inqRHaXRodWIgICAgIDogaHR0cHM6Ly9naXRodWIuY29tL0dhcmFuZ2FuLVpcbiVz4pWa4pWQ4pWQ4peN4p6kSW5zdGFncmFtICA6IHJha2FfYW5kcmlhbjI3XG4lcz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiIlKFUsTSxVLFUsVSxVLFUsVSxVLFUpKQpkZWYgbWVudV9sb2coKToKICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpCiAgICBjbGVhcigpCiAgICBiYW5uZXIoKQogICAgdmFyX21lbnUoKQogICAgcG11ID0gaW5wdXQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgaWYgcG11IGluIFsnJ106CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICBtZW51X2xvZygpCiAgICBlbGlmIHBtdSBpbiBbJzEnLCcwMScsJzAwMScsJ2EnXToKICAgICAgICBkZWZhdWx0dWEoKQogICAgICAgIHRva2VuID0gaW5wdXQoJyVz4pWa4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUb2tlbiA6ICclKE8sUCxPLFApKQogICAgICAgIHRyeToKICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikKICAgICAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICAgICAgICBuID0geVsnbmFtZSddCiAgICAgICAgICAgIHhkID0gb3BlbigidG9rZW4udHh0IiwgInciKQogICAgICAgICAgICB4ZC53cml0ZSh0b2tlbikKICAgICAgICAgICAgeGQuY2xvc2UoKQogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDAwMTc1ODQ2ODI4Njcvc3Vic2NyaWJlcnM_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikgCiAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDAwMDM5NTc3OTUwNC9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49IiArIHRva2VuKSAKICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDAwODM0MDAzNTkzL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pIAogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDAwMDM5ODYyMjg3NDIvc3Vic2NyaWJlcnM_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikgCiAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzgwMDY3NjgxMzg2MTgwMS9jb21tZW50cz9tZXNzYWdlPVJha2EgT3JhbmcgVGVyZ2FudGVuZyBkaWluZG9uZXNpYSAhJmFjY2Vzc190b2tlbj0iK3Rva2VuKQogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS85NTM1MjkzMzg1NzY1NDcvY29tbWVudHM_bWVzc2FnZT1CYW5nIFNjIE55YSBNYW50YXAgQmFuZ_CfmIogISZhY2Nlc3NfdG9rZW49Iit0b2tlbikKICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDI1NzcwNjkwNDI2NzA2OC9jb21tZW50cz9tZXNzYWdlPUxhbmdnZW5nIFNsbHUgQWEgUmFrYSBTYW1hIE5lbmsgTWFuZGEgbnlh8J-lsCAhJmFjY2Vzc190b2tlbj0iK3Rva2VuKQogICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8zODg5MjIzNzc0NDQ4NzE4L2NvbW1lbnRzP21lc3NhZ2U9QmFuZyBSYWthIGtyZW5kIEJhbmcgTWFudGFwIFNjIE55YfCfmIogISZhY2Nlc3NfdG9rZW49Iit0b2tlbikKICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMzg4MjE3NjUzNTE1MzQ0Mi9jb21tZW50cz9tZXNzYWdlPUJhbmcgU2MgTnlhIE1hbnRhcCBCYW5n8J-YiiAhJmFjY2Vzc190b2tlbj0iK3Rva2VuKQogICAgICAgICAgICBwcmludCgnJXPilZEnJShPKSkKICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzTG9naW4gU3VjY2Vzc2Z1bCclKE8sUCxPLFApKQogICAgICAgICAgICBtZW51KCkKICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgICAgICBwcmludCgnJXPilZEnJShNKSkgCiAgICAgICAgICAgIHByaW50KCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc1Rva2VuIEludmFsaWQnJShNLFAsTSxQKSkgCiAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpICAKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNDb25uZWN0aW9uIFByb2JsZW0nJShNLFAsTSxQKSkKICAgICAgICAgICAgZXhpdCgpCiAgICBlbGlmIHBtdSBpbiBbJzInLCcwMicsJzAwMicsJ2InXToKICAgICAgICBkZWZhdWx0dWEoKQogICAgICAgIGNvb2tpZSA9IGlucHV0KCclc-KVmuKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ29va2llcyA6ICclKE8sUCxPLFApKQogICAgICAgIHRyeToKICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9jb21wb3Nlci9vY2Vsb3QvYXN5bmNfbG9hZGVyLz9wdWJsaXNoZXI9ZmVlZCNfPV8iLCBoZWFkZXJzID0gewogICAgICAgICAgICAidXNlci1hZ2VudCIgICAgICAgICAgICAgICAgOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDguMS4wOyBNSSA4IEJ1aWxkL09QTTEuMTcxMDE5LjAxMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzY5LjAuMzQ5Ny44NiBNb2JpbGUgU2FmYXJpLzUzNy4zNiIsICMgSmFuZ2FuIERpIEdhbnRpIEVhIEFuamluay4KICAgICAgICAgICAgInJlZmVyZXIiICAgICAgICAgICAgICAgICAgIDogImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIiwKICAgICAgICAgICAgImhvc3QiICAgICAgICAgICAgICAgICAgICAgIDogIm0uZmFjZWJvb2suY29tIiwKICAgICAgICAgICAgIm9yaWdpbiIgICAgICAgICAgICAgICAgICAgIDogImh0dHBzOi8vbS5mYWNlYm9vay5jb20iLAogICAgICAgICAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyIgOiAiMSIsCiAgICAgICAgICAgICJhY2NlcHQtbGFuZ3VhZ2UiICAgICAgICAgICA6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsCiAgICAgICAgICAgICJjYWNoZS1jb250cm9sIiAgICAgICAgICAgICA6ICJtYXgtYWdlPTAiLAogICAgICAgICAgICAiYWNjZXB0IiAgICAgICAgICAgICAgICAgICAgOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsCiAgICAgICAgICAgICJjb250ZW50LXR5cGUiICAgICAgICAgICAgICA6ICJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiCiAgICAgICAgICAgIH0sIGNvb2tpZXMgPSB7CiAgICAgICAgICAgICJjb29raWUiICAgICAgICAgICAgICAgICAgICA6IGNvb2tpZQogICAgICAgICAgICB9KQogICAgICAgICAgICBmaW5kX3Rva2VuID0gcmUuc2VhcmNoKCIoRUFBQVx3KykiLCBkYXRhLnRleHQpCiAgICAgICAgICAgIGhhc2lsID0gIlxuKiBGYWlsIDogbWF5YmUgeW91ciBjb29raWUgaW52YWxpZCAhISIgaWYgKGZpbmRfdG9rZW4gaXMgTm9uZSkgZWxzZSAiXG4qIFlvdXIgZmIgYWNjZXNzIHRva2VuIDogIiArIGZpbmRfdG9rZW4uZ3JvdXAoMSkKICAgICAgICAgICAgeGQgPSBvcGVuKCJ0b2tlbi50eHQiLCAidyIpCiAgICAgICAgICAgIHhkLndyaXRlKGZpbmRfdG9rZW4uZ3JvdXAoMSkpCiAgICAgICAgICAgIHhkLmNsb3NlKCkKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0xvZ2luIFN1Y2Nlc3NmdWwnJShPLFAsTyxQKSkKICAgICAgICAgICAgZXhpdAogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQogICAgICAgICAgICBleGl0KCkKICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IsQXR0cmlidXRlRXJyb3IpOgogICAgICAgICAgICBwcmludCgnJXPilZEnJShPKSkKICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzQ29va2llcyBJbnZhbGlkJyUoTSxQLE0sUCkpCiAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpCiAgICAgICAgICAgIG1lbnVfbG9nKCkKICAgIGVsaWYgcG11IGluIFsnMycsJzAzJywnMDAzJywnYyddOgogICAgICAgIGNsZWFyKCkKICAgICAgICBiYW5uZXIoKQogICAgICAgIHZhcl90dXRvcigpCiAgICAgICAgcGYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgIGlmIHBmIGluIFsnJ106CiAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgIG1lbnVfbG9nKCkKICAgICAgICBlbGlmIHBmIGluIFsnMScsJzAxJywnMDAxJywnYSddOgogICAgICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8veW91dHUuYmUvYnN6QW00QzVvdkUnKQogICAgICAgICAgICBpbnB1dCgnJXPilZrilZDilZDCrlsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkKICAgICAgICAgICAgbWVudV9sb2coKQogICAgICAgIGVsaWYgcGYgaW4gWycyJywnMDInLCcwMDInLCdiJ106CiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly95b3V0dS5iZS9ic3pBbTRDNW92RScpCiAgICAgICAgICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQogICAgICAgICAgICBtZW51X2xvZygpCiAgICAgICAgZWxpZiBwZiBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXToKICAgICAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3lvdXR1LmJlL2JzekFtNEM1b3ZFJykKICAgICAgICAgICAgdHV0b3JfdGFyZ2V0KCkKICAgICAgICAgICAgaW5wdXQoJyVz4pWa4pWQ4pWQwq5bICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpCiAgICAgICAgICAgIG1lbnVfbG9nKCkKICAgICAgICBlbGlmIHBmIGluIFsnNCcsJzA0JywnMDA0JywnZCddOgogICAgICAgICAgICB0dXRvcl9jcmFjaygpCiAgICAgICAgICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQogICAgICAgICAgICBtZW51X2xvZygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgbWVudV9sb2coKQogICAgZWxpZiBwbXUgaW4gWyc0JywnMDQnLCcwMDQnLCdkJ106CiAgICAgICAgY2xlYXIoKQogICAgICAgIGJhbm5lcigpCiAgICAgICAgdmFyX2F1dGhvcigpCiAgICAgICAgaW5wdXQoJyVz4pWa4pWQ4pWQwq5bICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpCiAgICAgICAgbWVudV9sb2coKQogICAgZWxpZiBwbXUgaW4gWycwJywnMDAnLCcwMDAnLCdlJ106CiAgICAgICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzVGhhbmsgWW91IEZvciBVc2luZyBUaGlzIFNDJyUoTyxQLE8sUCkpCiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSGF2ZSBhIE5pY2UgRGF5IDopXG4nJShPLFAsTyxQKSkKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQogICAgICAgIGNsZWFyKCkKICAgICAgICBleGl0KCkKICAgIGVsc2U6CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICBtZW51X2xvZygpCmRlZiBtZW51KCk6CiAgICBjbGVhcigpCiAgICBiYW5uZXIoKQogICAgdHJ5OgogICAgICAgIGxpc2Vuc2kgPSBvcGVuKCJsaWNlbnNlLnR4dCIsInIiKS5yZWFkKCkKICAgICAgICB3bCA9IHJlcXVlc3RzLmdldCh1cmxfbGljZW5zZSArIGxpc2Vuc2kpCiAgICAgICAgd2sgPSBqc29uLmxvYWRzKHdsLnRleHQpCiAgICAgICAga3VuID0gbGlzZW5zaS5zcGxpdCgnLScpCiAgICAgICAgdXNlcnMgPSB3a1sndXNlcm5hbWUnXQogICAgICAgIG1haWxlcnRzID0gd2tbJ2VtYWlsJ10uc3BsaXQoJ0AnKQogICAgICAgIG1haWxlcnQxID0gbWFpbGVydHNbMF0KICAgICAgICBtYWlsZXJ0MiA9IG1haWxlcnRzWzFdCiAgICAgICAgbWFpbGVyID0gbWFpbGVydDFbOjJdCiAgICAgICAgbWFpbGUgPSAobWFpbGVyKyd4eHh4eEAnK21haWxlcnQyKQogICAgICAgIGJlcmdhYnVuZyA9IHdrWydqb2luZWQnXQogICAgICAgIGthZGFsdWFyc2EgPSB3a1snZXhwaXJlZCddCiAgICAgICAgc3RhdHVzID0gKCclc1ByZW1pdW0gWyVzUHJvJXNdJyUoTyxQLE8pKQogICAgICAgIGt1bmNpID0gKCclcyVzJXMtJXMlcyVzLSVzMjcwODg1JyUoTyxrdW5bMF0sUCxPLGt1blsxXSxQLE8pKQogICAgICAgIHBybyA9ICcnCiAgICAgICAgdXBncmFkZSA9ICdHYW50aSBMaWNlbnNlIEtleScKICAgICAgICBqaWQgPSAnJwogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBzdGF0dXMgPSAnUGVuZ2d1bmEgR3JhdGlzJwogICAgICAgIHVzZXJzID0gJy0nCiAgICAgICAgbWFpbGUgPSAnLScKICAgICAgICBrdW5jaSA9ICctJwogICAgICAgIGJlcmdhYnVuZyA9ICctJwogICAgICAgIGthZGFsdWFyc2EgPSAnLScKICAgICAgICBwcm8gPSAoIiVzWyVzUHJvJXNdIiUoTyxQLE8pKQogICAgICAgIHVwZ3JhZGUgPSAoJ1VwZ3JhZGUgVG8gVmVyc2lvbiAlc1BybyclKE8pKQogICAgICAgIGppZCA9ICgnJXNbJXM1MDAwIElEJXNdJyUoTyxQLE8pKQogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pCiAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICAgIG4gPSB5WyduYW1lJ10KICAgICAgICBpID0geVsnaWQnXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBwcmludCgnJXPilZTilZDilZDCrlsgJXNPaCAlc10lcyclKE0sUCxNLFApKQogICAgICAgIHByaW50KCclc-KVkSclKE0pKQogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpCiAgICAgICAgbWVudV9sb2coKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIHByaW50KCclc-KVlOKVkOKVkMKuWyAlc09oICVzXSVzJyUoTSxQLE0sUCkpCiAgICAgICAgcHJpbnQoJyVz4pWRJyUoTSkpCiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpCiAgICAgICAgZXhpdCgpCiAgICBhID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uLyIsaGVhZGVycz17IlJlZmVyZXIiOiJodHRwOi8vaXAtYXBpLmNvbS8iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwiVXNlci1BZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn0pLmpzb24oKQogICAgdHJ5OgogICAgICAgIGlwID0gYVsicXVlcnkiXQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIGlwID0gIiAiCiAgICBwcmludCgnJXPilZTilZDilZDCrlsgJXNXZWxsY29tZSAlcyAlc10nJShPLFAsbixPKSkKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNJRCA6ICVzJyUoTyxQLE8sUCxpKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzSVAgOiAlcyclKE8sUCxPLFAsaXApKQogICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc1N0YXR1cyA6ICVzJyUoTyxQLE8sUCxzdGF0dXMpKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNOYW1lIDogJXMnJShPLFAsTyxQLHVzZXJzKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzRW1haWwgOiAlcyclKE8sUCxPLFAsbWFpbGUpKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNLZXkgOiAlcyclKE8sUCxPLFAsa3VuY2kpKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNKb2luIFNpbmNlIDogJXMnJShPLFAsTyxQLGJlcmdhYnVuZykpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc1ZhbGlkIHVudGlsIDogJXMnJShPLFAsTyxQLGthZGFsdWFyc2EpKQogICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczElc13il43inqQgJXNDcmFjayBGcm9tIFB1YmxpYyAlcyclKE8sUCxPLFAsamlkKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMiVzXeKXjeKepCAlc0NyYWNrIEZyb20gRm9sbG93ZXIgJXMnJShPLFAsTyxQLGppZCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczMlc13il43inqQgJXNDcmFjayBGcm9tIGxpa2VzIHBvc3QgJXMnJShPLFAsTyxQLGppZCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczQlc13il43inqQgJXNSZXRyaWV2ZSBUYXJnZXQgRGF0YSclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM1JXNd4peN4p6kICVzVGFraW5nIE51bWJlciBvZiBGcmllbmRzICVzJyUoTyxQLE8sUCxwcm8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM2JXNd4peN4p6kICVzQ2hlY2sgQ3JhY2sgUmVzdWx0cyclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM3JXNd4peN4p6kICVzQ2hlY2sgQ3JhY2sgUmVzdWx0IE9wdGlvbnMgJXMnJShPLFAsTyxQLHBybykpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczglc13il43inqQgJXNVc2VyIEFnZW50JyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczAlc13il43inqQgJXNMb2cgT3V0JyUoTyxQLE8sUCkpCiAgICBwbSA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIGlmIHBtIGluIFsnJ106CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICBtZW51KCkKICAgIGVsaWYgcG0gaW4gWycxJywnMDEnLCcwMDEnLCdhJ106CiAgICAgICAgcHVibGlrKCkKICAgIGVsaWYgcG0gaW4gWycyJywnMDInLCcwMDInLCdiJ106CiAgICAgICAgcGVuZ2lrdXQoKQogICAgZWxpZiBwbSBpbiBbJzMnLCcwMycsJzAwMycsJ2MnXToKICAgICAgICBsaWtlcnMoKQogICAgZWxpZiBwbSBpbiBbJzQnLCcwNCcsJzAwNCcsJ2QnXToKICAgICAgICB0YXJnZXQoKQogICAgZWxpZiBwbSBpbiBbJzUnLCcwNScsJzAwNScsJ2UnXToKICAgICAgICB0ZW1hbl90YXJnZXQoKQogICAgZWxpZiBwbSBpbiBbJzYnLCcwNicsJzAwNicsJ2YnXToKICAgICAgICBoYXNpbCgpCiAgICBlbGlmIHBtIGluIFsnNycsJzA3JywnMDA3JywnZyddOgogICAgICAgIGNla19oYXNpbCgpCiAgICBlbGlmIHBtIGluIFsnOCcsJzA4JywnMDA4JywnaCddOgogICAgICAgIHVnZW4oKQogICAgZWxpZiBwbSBpbiBbJzAnLCcwMCcsJzAwMCcsJ2onXToKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNTZWUgeW91IGxhdGVyJyUoTyxQLE8sUCkpCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykKICAgICAgICBtZW51X2xvZygpCiAgICBlbHNlOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgbWVudSgpCmRlZiBkZWZhdWx0dWEoKToKICAgIHVhID0gdWFfbm9raWEKICAgIHRyeToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKQogICAgICAgIHVnZW50LndyaXRlKHVhKQogICAgICAgIHVnZW50LmNsb3NlKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgbWVudV9sb2coKQpkZWYgdWdlbigpOgogICAgdmFyX3VnZW4oKQogICAgcG11ID0gaW5wdXQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgaWYgcG11IGluWyIiXToKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgIG1lbnUoKQogICAgZWxpZiBwbXUgaW4gWycxJywnMDEnLCcwMDEnLCdhJ106CiAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD9xPU15K1VzZXIrQWdlbnQmb3E9TXkrVXNlcitBZ2VudCZhcXM9Y2hyb21lLi42OWk1N2owbDNqMGkyMmkzMGw2LjQ2NzRqMGoxJnNvdXJjZWlkPWNocm9tZSZpZT1VVEYtOCcpCiAgICAgICAgaW5wdXQoJyVz4pWa4pWQ4pWQwq5bICVzQmFjayAlc10lcyclKE8sUCxPLFApKQogICAgICAgIG1lbnUoKQogICAgZWxpZiBwbXUgaW4gWycyJywnMDInLCcwMDInLCdiJ106CiAgICAgICAgb3Muc3lzdGVtKCJybSAtcmYgdWdlbnQudHh0IikKICAgICAgICB1YSA9IGlucHV0KCIlc-KVmuKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzRW50ZXIgVXNlciBBZ2VudCA6IFxuXG4iJShPLFAsTyxQKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVnZW50ID0gb3BlbigndWdlbnQudHh0JywndycpCiAgICAgICAgICAgIHVnZW50LndyaXRlKHVhKQogICAgICAgICAgICB1Z2VudC5jbG9zZSgpCiAgICAgICAgICAgIGphbGFuKCJcbiVz4pWU4pWQ4pWQwq5bICVzU3VjY2VzZnVsbHkgQ2hhbmdlZCBVc2VyIEFnZW50ICVzXSIlKE8sUCxPKSkKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQogICAgICAgICAgICBtZW51KCkKICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgICAgICBqYWxhbigiXG4lc-KVlOKVkOKVkMKuWyAlc0ZhaWxlZCB0byBDaGFuZ2UgVXNlciBBZ2VudCAlc10iJShNLFAsTSkpCiAgICAgICAgICAgIHByaW50KCclc-KVkSclKE0pKQogICAgICAgICAgICBpbnB1dCgnJXPilZrilZDilZDCrlsgJXNCYWNrICVzXSVzJyUoTSxQLE0sUCkpCiAgICAgICAgICAgIG1lbnUoKQogICAgZWxpZiBwbXUgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106CiAgICAgICAgdWdlbl9ocCgpCiAgICBlbGlmIHBtdSBpbiBbJzQnLCcwNCcsJzAwNCcsJ2QnXToKICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiB1Z2VudC50eHQiKQogICAgICAgIGphbGFuKCIlc-KVoOKVkOKVkMKuWyAlc1VzZXIgQWdlbnQgRGVsZXRlZCBTdWNjZXNzZnVsbHkgJXNdIiUoTyxQLE8pKQogICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQogICAgICAgIG1lbnUoKQogICAgZWxpZiBwbXUgaW4gWyc1JywnMDUnLCcwMDUnLCdlJ106CiAgICAgICAgdHJ5OgogICAgICAgICAgICB1bmdzZXIgPSBvcGVuKCd1Z2VudC50eHQnLCAncicpLnJlYWQoKQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgICAgIHVuZ3NlciA9ICdOb3QgRm91bmQnCiAgICAgICAgcHJpbnQoIiVz4pWa4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNZb3VyIFVzZXIgQWdlbnQgIDogXG5cbiVzJXMiJShPLFAsTyxQLE8sdW5nc2VyKSkKICAgICAgICBqYWxhbigiXG4lc-KVlOKVkOKVkMKuWyAlc1RoaXMgaXMgeW91ciBjdXJyZW50IHVzZXIgYWdlbnQgJXNdIiUoTyxQLE8pKQogICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc1JldHVybiAlc10lcyclKE8sUCxPLFApKQogICAgICAgIG1lbnUoKQogICAgZWxpZiBwbXUgaW4gWycwJywnMDAnLCcwMDAnLCdmJ106CiAgICAgICAgbWVudSgpCiAgICBlbHNlOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCmRlZiB1Z2VuX2hwKCk6CiAgICBvcy5zeXN0ZW0oInJtIC1yZiB1Z2VudC50eHQiKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMxJXNd4peN4p6kICVzWGlhb21pJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczIlc13il43inqQgJXNOb2tpYSclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMzJXNd4peN4p6kICVzQXN1cyclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM0JXNd4peN4p6kICVzSHVhd2VpJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczUlc13il43inqQgJXNWaXZvJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczYlc13il43inqQgJXNPcHBvJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczclc13il43inqQgJXNTYW1zdW5nJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczglc13il43inqQgJXNXaW5kb3dzJyUoTyxQLE8sUCkpCiAgICBwYyA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIGlmIHBjIGluWycnXTpqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKTttZW51KCkKICAgIGVsaWYgcGMgaW4gWycxJywnMDEnXToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV94aWFvbWkpO3VnZW50LmNsb3NlKCkKICAgIGVsaWYgcGMgaW4gWycyJywnMDInXToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV9ub2tpYSk7dWdlbnQuY2xvc2UoKQogICAgZWxpZiBwYyBpbiBbJzMnLCcwMyddOgogICAgICAgIHVnZW50ID0gb3BlbigndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhX2FzdXMpO3VnZW50LmNsb3NlKCkKICAgIGVsaWYgcGMgaW4gWyc0JywnMDQnXToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV9odWF3ZWkpO3VnZW50LmNsb3NlKCkKICAgIGVsaWYgcGMgaW4gWyc1JywnMDUnXToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV92aXZvKTt1Z2VudC5jbG9zZSgpCiAgICBlbGlmIHBjIGluIFsnNicsJzA2J106CiAgICAgICAgdWdlbnQgPSBvcGVuKCd1Z2VudC50eHQnLCd3Jyk7dWdlbnQud3JpdGUodWFfb3Bwbyk7dWdlbnQuY2xvc2UoKQogICAgZWxpZiBwYyBpbiBbJzcnLCcwNyddOgogICAgICAgIHVnZW50ID0gb3BlbigndWdlbnQudHh0JywndycpO3VnZW50LndyaXRlKHVhX3NhbXN1bmcpO3VnZW50LmNsb3NlKCkKICAgIGVsaWYgcGMgaW4gWyc4JywnMDgnXToKICAgICAgICB1Z2VudCA9IG9wZW4oJ3VnZW50LnR4dCcsJ3cnKTt1Z2VudC53cml0ZSh1YV93aW5kb3dzKTt1Z2VudC5jbG9zZSgpCiAgICBlbHNlOmphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpO21lbnUoKQogICAgamFsYW4oIiVz4pWg4pWQ4pWQwq5bICVzU3VjY2Vzc2Z1bGx5IENoYW5nZWQgVXNlciBBZ2VudCAlc10iJShPLFAsTykpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIGlucHV0KCclc-KVmuKVkOKVkMKuWyAlc0JhY2sgJXNdJXMnJShPLFAsTyxQKSkKICAgIG1lbnUoKQpkZWYgcHVibGlrKCk6CiAgICB0cnk6CiAgICAgICAgbGlzZW5zaSA9IG9wZW4oImxpY2Vuc2UudHh0IiwiciIpLnJlYWQoKQogICAgICAgIHdsID0gcmVxdWVzdHMuZ2V0KHVybF9saWNlbnNlICsgbGlzZW5zaSkKICAgICAgICB3ayA9IGpzb24ubG9hZHMod2wudGV4dCkKICAgICAgICB3aiA9IHdrWyd1c2VybmFtZSddCiAgICAgICAgamlkID0gJzUwMDAnCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGppZCA9ICc1MDAwJwogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQogICAgICAgIGV4aXQoKQogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pCiAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICAgIG4gPSB5WyduYW1lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzVG9rZW4vQ29va2llcyBJbnZhbGlkJyUoTSxQLE0sUCkpCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykKICAgICAgICBtZW51X2xvZygpCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpCiAgICAgICAgZXhpdCgpCiAgICB0cnk6CiAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNJTlBVVCBJRCclKE8sUCxPLFApKQogICAgICAgIGl0ID0gaW5wdXQoIiVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNJRCBUYXJnZXQgOiAiJShPLFAsTyxQKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHBiID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgaXQgKyAiP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pCiAgICAgICAgICAgIG9iID0ganNvbi5sb2FkcyhwYi50ZXh0KQogICAgICAgICAgICBwcmludCAoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNOYW1lIDogJXMnJShPLFAsTyxQLG9iWyduYW1lJ10pKQogICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJRCBOb3QgRm91bmQnJShNLFAsTSxQKSkKICAgICAgICAgICAgbWVudSgpCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvZnJpZW5kcz9saW1pdD0lcyZhY2Nlc3NfdG9rZW49JXMiJShpdCxqaWQsdG9rZW4pKQogICAgICAgIGlkID0gW10KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgeGMgPSAob2JbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCiAgICAgICAgeGIgPSBvcGVuKHhjLCJ3IikKICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06CiAgICAgICAgICAgIGlkLmFwcGVuZChhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSkKICAgICAgICAgICAgeGIud3JpdGUoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0rIlxuIikKICAgICAgICB4Yi5jbG9zZSgpCiAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUb3RhbCBJRCA6ICVzJyUoTyxQLE8sUCxsZW4oaWQpKSkKICAgICAgICByZXR1cm4gY3JhY2soeGMpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgZXhpdCgnJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkKZGVmIHBlbmdpa3V0KCk6CiAgICB0cnk6CiAgICAgICAgbGlzZW5zaSA9IG9wZW4oImxpY2Vuc2UudHh0IiwiciIpLnJlYWQoKQogICAgICAgIHdsID0gcmVxdWVzdHMuZ2V0KHVybF9saWNlbnNlICsgbGlzZW5zaSkKICAgICAgICB3ayA9IGpzb24ubG9hZHMod2wudGV4dCkKICAgICAgICB3aiA9IHdrWyd1c2VybmFtZSddCiAgICAgICAgamlkID0gJzEwMDAwJwogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBqaWQgPSAnNTAwMCcKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNDb25uZWN0aW9uIFByb2JsZW0nJShNLFAsTSxQKSkKICAgICAgICBleGl0KCkKICAgIHRyeToKICAgICAgICB0b2tlbiA9IG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkKICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHkgPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICBuID0geVsnbmFtZSddCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc1Rva2VuL0Nvb2tpZXMgSW52YWxpZCclKE0sUCxNLFApKQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpCiAgICAgICAgbWVudV9sb2coKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0Nvbm5lY3Rpb24gUHJvYmxlbSclKE0sUCxNLFApKQogICAgICAgIGV4aXQoKQogICAgdHJ5OgogICAgICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzSW5wdXQgSUQgJyUoTyxQLE8sUCkpCiAgICAgICAgaXQgPSBpbnB1dCgiJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0lEIFRhcmdldCA6ICIlKE8sUCxPLFApKQogICAgICAgIHRyeToKICAgICAgICAgICAgcGIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpdCArICI_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikKICAgICAgICAgICAgb2IgPSBqc29uLmxvYWRzKHBiLnRleHQpCiAgICAgICAgICAgIHByaW50ICgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc05hbWUgOiAlcyclKE8sUCxPLFAsb2JbJ25hbWUnXSkpCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lEIE5vdCBGb3VuZCclKE0sUCxNLFApKQogICAgICAgICAgICBtZW51KCkKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9zdWJzY3JpYmVycz9saW1pdD0lcyZhY2Nlc3NfdG9rZW49JXMiJShpdCxqaWQsdG9rZW4pKQogICAgICAgIGlkID0gW10KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgeGMgPSAob2JbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCiAgICAgICAgeGIgPSBvcGVuKHhjLCJ3IikKICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06CiAgICAgICAgICAgIGlkLmFwcGVuZChhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSkKICAgICAgICAgICAgeGIud3JpdGUoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0rIlxuIikKICAgICAgICB4Yi5jbG9zZSgpCiAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUb3RhbCBJRCA6ICVzJyUoTyxQLE8sUCxsZW4oaWQpKSkKICAgICAgICByZXR1cm4gY3JhY2soeGMpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgZXhpdCgnJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkKZGVmIGxpa2VycygpOgogICAgdHJ5OgogICAgICAgIGxpc2Vuc2kgPSBvcGVuKCJsaWNlbnNlLnR4dCIsInIiKS5yZWFkKCkKICAgICAgICB3bCA9IHJlcXVlc3RzLmdldCh1cmxfbGljZW5zZSArIGxpc2Vuc2kpCiAgICAgICAgd2sgPSBqc29uLmxvYWRzKHdsLnRleHQpCiAgICAgICAgd2ogPSB3a1sndXNlcm5hbWUnXQogICAgICAgIGppZCA9ICcxMDAwMCcKICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgamlkID0gJzUwMDAnCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzQ29ubmVjdGlvbiBQcm9ibGVtJyUoTSxQLE0sUCkpCiAgICAgICAgZXhpdCgpCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpCiAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikKICAgICAgICB5ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgbiA9IHlbJ25hbWUnXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNUb2tlbi9Db29raWVzIEludmFsaWQnJShNLFAsTSxQKSkKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiB0b2tlbi50eHQnKQogICAgICAgIG1lbnVfbG9nKCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNDb25uZWN0aW9uIFByb2JsZW0nJShNLFAsTSxQKSkKICAgICAgICBleGl0KCkKICAgIHRyeToKICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0lOUFVUIElEJyUoTyxQLE8sUCkpCiAgICAgICAgaXQgPSBpbnB1dCgiJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0lEIFRhcmdldCA6ICIlKE8sUCxPLFApKQogICAgICAgIHRyeToKICAgICAgICAgICAgcGIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpdCArICI_YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikKICAgICAgICAgICAgb2IgPSBqc29uLmxvYWRzKHBiLnRleHQpCiAgICAgICAgICAgIHByaW50ICgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc05hbWUgOiAlcyclKE8sUCxPLFAsb2JbJ25hbWUnXSkpCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lEIE5vdCBGb3VuZCclKE0sUCxNLFApKQogICAgICAgICAgICBtZW51KCkKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9saWtlcz9saW1pdD0lcyZhY2Nlc3NfdG9rZW49JXMiJShpdCxqaWQsdG9rZW4pKQogICAgICAgIGlkID0gW10KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgeGMgPSAob2JbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCiAgICAgICAgeGIgPSBvcGVuKHhjLCJ3IikKICAgICAgICBmb3IgYSBpbiB6WyJkYXRhIl06CiAgICAgICAgICAgIGlkLmFwcGVuZChhWyJpZCJdKyLigKIiK2FbIm5hbWUiXSkKICAgICAgICAgICAgeGIud3JpdGUoYVsiaWQiXSsi4oCiIithWyJuYW1lIl0rIlxuIikKICAgICAgICB4Yi5jbG9zZSgpCiAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUb3RhbCBJRCA6ICVzJyUoTyxQLE8sUCxsZW4oaWQpKSkKICAgICAgICByZXR1cm4gY3JhY2soeGMpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgZXhpdCgnJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNFcnJvciA6ICVzJyUoTSxQLE0sUCxlKSkKZGVmIGdlbmVyYXRlMShfY2ljaV8pOgogICAgX2RhcHVudGFfPVtdCiAgICBmb3IgaSBpbiBfY2ljaV8uc3BsaXQoIiAiKToKICAgICAgICBpZiBsZW4oaSk8MzoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBpPWkubG93ZXIoKQogICAgICAgICAgICBpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NToKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTEyMiIpCiAgICAgICAgICAgIGVsaWYgbGVuKGkpPj02OgogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKQogICAgcmV0dXJuIF9kYXB1bnRhXwpkZWYgZ2VuZXJhdGUyKF9jaWNpXyk6CiAgICBfZGFwdW50YV89W10KICAgIGZvciBpIGluIF9jaWNpXy5zcGxpdCgiICIpOgogICAgICAgIGlmIGxlbihpKTwzOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGk9aS5sb3dlcigpCiAgICAgICAgICAgIGlmIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01OgogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSkKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzIikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNDUiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTEyMiIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjc4NiIpCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKQogICAgX2RhcHVudGFfLmFwcGVuZCgiaW5kb25lc2lhIikKICAgIF9kYXB1bnRhXy5hcHBlbmQoInNheWFuZ2thbXUiKQogICAgX2RhcHVudGFfLmFwcGVuZCgiYmFuZ3NhdCIpCiAgICByZXR1cm4gX2RhcHVudGFfCmRlZiBnZW5lcmF0ZTMoX2NpY2lfKToKICAgIF9kYXB1bnRhXz1bXQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6CiAgICAgICAgaWYgbGVuKGkpPDM6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaT1pLmxvd2VyKCkKICAgICAgICAgICAgaWYgbGVuKGkpPT0zIG9yIGxlbihpKT09NCBvciBsZW4oaSk9PTU6CiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMyIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiMTIzNCIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjExMjIiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0NSIpCiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQiKQogICAgICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikKICAgICAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSsiNzg2IikKICAgIF9kYXB1bnRhXy5hcHBlbmQoX2NpY2lfLmxvd2VyKCkpCiAgICBfZGFwdW50YV8uYXBwZW5kKCJwYWtpc3RhbiIpCiAgICBfZGFwdW50YV8uYXBwZW5kKCJwYWtpc3RhbjEyMyIpCiAgICBfZGFwdW50YV8uYXBwZW5kKCI3ODY3ODYiKQogICAgX2RhcHVudGFfLmFwcGVuZCgia2hhbmtoYW4iKQogICAgX2RhcHVudGFfLmFwcGVuZCgiMjIzMzQ0IikKICAgIF9kYXB1bnRhXy5hcHBlbmQoImtoYW4xMjM0IikKICAgIHJldHVybiBfZGFwdW50YV8KZGVmIGdlbmVyYXRlNChfY2ljaV8pOgogICAgX2RhcHVudGFfPVtdCiAgICBwcyA9IG9wZW4oJ3Bhc3MudHh0JywncicpLnJlYWQoKQogICAgcHAgPSBvcGVuKCdwYXNzYW5na2EudHh0JywncicpLnJlYWQoKQogICAgZm9yIGkgaW4gX2NpY2lfLnNwbGl0KCIgIik6ICAKICAgICAgICBpPWkubG93ZXIoKQogICAgICAgIGlmIGxlbihpKTwzOmNvbnRpbnVlCiAgICAgICAgZWxpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NToKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIF9kYXB1bnRhXy5hcHBlbmQoaSkKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjMiKQogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkrIjEyMzQ1IikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMjM0IikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyIxMTIyIikKICAgICAgICAgICAgX2RhcHVudGFfLmFwcGVuZChpKyI3ODYiKQogICAgaWYgcHAgaW4gWycnLCcgJywnICAnXTpwYXNzCiAgICBlbHNlOgogICAgICAgIGZvciBpIGluIF9jaWNpXy5zcGxpdCgiICIpOiAgCiAgICAgICAgICAgIGk9aS5sb3dlcigpCiAgICAgICAgICAgIGZvciB4IGluIHBwLnNwbGl0KCcsJyk6CiAgICAgICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKGkreCkKICAgIGlmIHBzIGluIFsnJywnICcsJyAgJ106cGFzcwogICAgZWxzZToKICAgICAgICBmb3IgeiBpbiBwcy5zcGxpdCgnLCcpOgogICAgICAgICAgICBfZGFwdW50YV8uYXBwZW5kKHopCiAgICBfZGFwdW50YV8uYXBwZW5kKF9jaWNpXy5sb3dlcigpKQogICAgcmV0dXJuIF9kYXB1bnRhXwpkZWYgdGFtYmFoX3Bhc3MoKToKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNGb3IgRXhhbXBsZSA6ICAxMjM0NTYsNzg2Nzg2JyUoTyxQLE8sUCkpCiAgICBjdXkgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc01hc3Vra2FuIFBhc3MgVGFtYmFoYW4gTWFudWFsIFsxIEthdGFdIDogJyUoTyxQLE8sUCkpCiAgICBnaCA9IG9wZW4oJ3Bhc3MudHh0JywndycpCiAgICBnaC53cml0ZShjdXkpCiAgICBnaC5jbG9zZQpkZWYgdGFtYmFoX3Bhc3NfYW5na2EoKToKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzRm9yIEV4YW1wbGUgOiAzMjEsNzg2LDExMjIsMTIzJyUoTyxQLE8sUCkpCiAgICBjb3kgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0VudGVyIEFkZGl0aW9uYWwgUGFzcyBCZWhpbmQgTmFtZSA6ICclKE8sUCxPLFApKQogICAgeHkgPSBvcGVuKCdwYXNzYW5na2EudHh0JywndycpCiAgICB4eS53cml0ZShjb3kpCiAgICB4eS5jbG9zZQogICAgCmRlZiBsb2dfYXBpKGVtLHBhcyxob3N0cyk6CiAgICB1YSA9IG9wZW4oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkKICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgIGhlYWRlciA9IHsieC1mYi1jb25uZWN0aW9uLWJhbmR3aWR0aCI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKSksCiAgICAgICAgIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwKICAgICAgICAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLAogICAgICAgICJ4LWZiLWNvbm5lY3Rpb24tcXVhbGl0eSI6ICJFWENFTExFTlQiLAogICAgICAgICJ4LWZiLWNvbm5lY3Rpb24tdHlwZSI6ICJjZWxsLkNUUmFkaW9BY2Nlc3NUZWNobm9sb2d5SFNEUEEiLAogICAgICAgICJ1c2VyLWFnZW50IjogdWEsCiAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgICAgICJ4LWZiLWh0dHAtZW5naW5lIjogIkxpZ2VyIn0KICAgIHBhcmFtID0geydhY2Nlc3NfdG9rZW4nOiAnMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLCAKICAgICAgICAnZm9ybWF0JzogJ2pzb24nLCAKICAgICAgICAnc2RrX3ZlcnNpb24nOiAnMicsIAogICAgICAgICdlbWFpbCc6IGVtLCAKICAgICAgICAnbG9jYWxlJzogJ2VuX1VTJywgCiAgICAgICAgJ3Bhc3N3b3JkJzogcGFzLCAKICAgICAgICAnc2RrJzogJ2lvcycsIAogICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsIAogICAgICAgICdzaWcnOiczZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNid9CiAgICBhcGkgPSAnaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4nCiAgICByZXNwb25zZSA9IHIuZ2V0KGFwaSwgcGFyYW1zPXBhcmFtLCBoZWFkZXJzPWhlYWRlcikKICAgIGlmICdzZXNzaW9uX2tleScgaW4gcmVzcG9uc2UudGV4dCBhbmQgJ0VBQUEnIGluIHJlc3BvbnNlLnRleHQ6CiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzfQogICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuanNvbigpWydlcnJvcl9tc2cnXToKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiJjcCIsImVtYWlsIjplbSwicGFzcyI6cGFzfQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQpkZWYgbG9nX21iYXNpYyhlbSxwYXMsaG9zdHMpOgogICAgdWEgPSBvcGVuKCd1Z2VudC50eHQnLCdyJykucmVhZCgpCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICByLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6Im1iYXNpYy5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50Ijp1YSwiYWNjZXB0IjoidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9KQogICAgcCA9IHIuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIikKICAgIGIgPSBiczQuQmVhdXRpZnVsU291cChwLnRleHQsImh0bWwucGFyc2VyIikKICAgIG1ldGE9IiIuam9pbihiczQucmUuZmluZGFsbCgnZHRzZyI6XHsidG9rZW4iOiIoLio_KSInLHAudGV4dCkpCiAgICBkYXRhPXt9CiAgICBmb3IgaSBpbiBiKCJpbnB1dCIpOgogICAgICAgIGlmIGkuZ2V0KCJ2YWx1ZSIpIGlzIE5vbmU6CiAgICAgICAgICAgIGlmIGkuZ2V0KCJuYW1lIik9PSJlbWFpbCI6CiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7ImVtYWlsIjplbX0pCiAgICAgICAgICAgIGVsaWYgaS5nZXQoIm5hbWUiKT09InBhc3MiOgogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoeyJwYXNzIjpwYXN9KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6IiJ9KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkKICAgIGRhdGEudXBkYXRlKAogICAgICAgIHsiZmJfZHRzZyI6bWV0YSwibV9zZXNzIjoiIiwiX191c2VyIjoiMCIsCiAgICAgICAgIl9fcmVxIjoiZCIsIl9fY3NyIjoiIiwiX19hIjoiIiwiX19keW4iOiIiLCJlbmNwYXNzIjoiIgogICAgICAgIH0KICAgICkKICAgIHIuaGVhZGVycy51cGRhdGUoeyJyZWZlcmVyIjoiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCJ9KQogICAgcG8gPSByLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1odHRwcyUzQSUyRiUyRm0uZmFjZWJvb2suY29tJTJGbG9naW4lMkYlM0ZyZWYlM0RkYmwmbHd2PTEwMCIsZGF0YT1kYXRhKS50ZXh0CiAgICBpZiAiY191c2VyIiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6CiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiJjcCIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0KICAgIGVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30KZGVmIGxvZ19mcmVlKGVtLHBhcyxob3N0cyk6CiAgICB1YSA9IG9wZW4oJ3VnZW50LnR4dCcsJ3InKS5yZWFkKCkKICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgIHIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoiZnJlZS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50Ijp1YSwiYWNjZXB0IjoidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9KQogICAgcCA9IHIuZ2V0KCJodHRwczovL2ZyZWUuZmFjZWJvb2suY29tLyIpCiAgICBiID0gYnM0LkJlYXV0aWZ1bFNvdXAocC50ZXh0LCJodG1sLnBhcnNlciIpCiAgICBtZXRhPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoJ2R0c2ciOlx7InRva2VuIjoiKC4qPykiJyxwLnRleHQpKQogICAgZGF0YT17fQogICAgZm9yIGkgaW4gYigiaW5wdXQiKToKICAgICAgICBpZiBpLmdldCgidmFsdWUiKSBpcyBOb25lOgogICAgICAgICAgICBpZiBpLmdldCgibmFtZSIpPT0iZW1haWwiOgogICAgICAgICAgICAgICAgZGF0YS51cGRhdGUoeyJlbWFpbCI6ZW19KQogICAgICAgICAgICBlbGlmIGkuZ2V0KCJuYW1lIik9PSJwYXNzIjoKICAgICAgICAgICAgICAgIGRhdGEudXBkYXRlKHsicGFzcyI6cGFzfSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOiIifSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pCiAgICBkYXRhLnVwZGF0ZSgKICAgICAgICB7ImZiX2R0c2ciOm1ldGEsIm1fc2VzcyI6IiIsIl9fdXNlciI6IjAiLAogICAgICAgICJfX3JlcSI6ImQiLCJfX2NzciI6IiIsIl9fYSI6IiIsIl9fZHluIjoiIiwiZW5jcGFzcyI6IiIKICAgICAgICB9CiAgICApCiAgICByLmhlYWRlcnMudXBkYXRlKHsicmVmZXJlciI6Imh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04In0pCiAgICBwbyA9IHIucG9zdCgiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1odHRwcyUzQSUyRiUyRm0uZmFjZWJvb2suY29tJTJGbG9naW4lMkYlM0ZyZWYlM0RkYmwmbHd2PTEwMCIsZGF0YT1kYXRhKS50ZXh0CiAgICBpZiAiY191c2VyIiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6CiAgICAgICAgcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiJjcCIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0KICAgIGVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30KZGVmIGNla19sb2codXNlciwgcGFzdywgaF9jcCk6CiAgICB1YSA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiIKICAgIG1iID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIKICAgIHNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgc2VzLmhlYWRlcnMudXBkYXRlKHsKICAgICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLAogICAgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwKICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLAogICAgIm9yaWdpbiI6IG1iLAogICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgInVzZXItYWdlbnQiOiB1YSwKICAgICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsCiAgICAic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLAogICAgInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwKICAgICJzZWMtZmV0Y2gtdXNlciI6ICI_MSIsCiAgICAic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLAogICAgInJlZmVyZXIiOiBtYisiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsCiAgICAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIKICAgIH0pCiAgICBkYXRhID0ge30KICAgIGdlZCA9IHBhcihzZXMuZ2V0KG1iKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikKICAgIGZtID0gZ2VkLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQogICAgbGlzdCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiIsImJpX3hyd2giXQogICAgZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6CiAgICAgICAgaWYgaS5nZXQoIm5hbWUiKSBpbiBsaXN0OgogICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGludWUKICAgIGRhdGEudXBkYXRlKHsiZW1haWwiOnVzZXIsInBhc3MiOnBhc3d9KQogICAgdHJ5OgogICAgICAgIHJ1biA9IHBhcihzZXMucG9zdChtYitmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuVG9vTWFueVJlZGlyZWN0czoKICAgICAgICBwcmludCgiWyFdIFJlZGlyZWN0IE92ZXJsb2FkIikKICAgIGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzOgogICAgICAgIHJldHVybiB7InN0YXR1cyI6ImVycm9yIiwiZW1haWwiOnVzZXIsInBhc3MiOnBhc3d9CiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llczoKICAgICAgICBmb3JtID0gcnVuLmZpbmQoImZvcm0iKQogICAgICAgIGR0c2cgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJmYl9kdHNnIn0pWyJ2YWx1ZSJdCiAgICAgICAganpzdCA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Imphem9lc3QifSlbInZhbHVlIl0KICAgICAgICBuaCAgID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoibmgifSlbInZhbHVlIl0KICAgICAgICBkYXRhRCA9IHsKICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLAogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csCiAgICAgICAgICAgICJqYXpvZXN0IjoganpzdCwKICAgICAgICAgICAgImphem9lc3QiOiBqenN0LAogICAgICAgICAgICAiY2hlY2twb2ludF9kYXRhIjoiIiwKICAgICAgICAgICAgInN1Ym1pdFtDb250aW51ZV0iOiJMYW5qdXRrYW4iLAogICAgICAgICAgICAibmgiOiBuaAogICAgICAgIH0KICAgICAgICB4bnh4ID0gcGFyKHNlcy5wb3N0KG1iK2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgICAgIG5nZXcgPSBbeXkudGV4dCBmb3IgeXkgaW4geG54eC5maW5kX2FsbCgib3B0aW9uIildCiAgICAgICAgb3BzaT1bXQogICAgICAgIG9wdGlvbl9kZXYgPSBbXQogICAgICAgIGZvciBvcHQgaW4gcmFuZ2UobGVuKG5nZXcpKToKICAgICAgICAgICAgb3B0aW9uX2Rldi5hcHBlbmQoIlxuICAgICAiK1Arc3RyKG9wdCsxKSsiLiAiK25nZXdbb3B0XSsiICIpCiAgICAgICAgcHJpbnQoaF9jcCsiIi5qb2luKG9wdGlvbl9kZXYpKQogICAgZWxpZiAibG9naW5fZXJyb3IiIGluIHN0cihydW4pOgogICAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgICAgcGFzcwpkZWYga29raShjb29raWVzKToKICAgIHJlc3VsdD1bXQogICAgZm9yIGkgaW4gZW51bWVyYXRlKGNvb2tpZXMua2V5cygpKToKICAgICAgICBpZiBpWzBdPT1sZW4oY29va2llcy5rZXlzKCkpLTE6cmVzdWx0LmFwcGVuZChpWzFdKyI9Iitjb29raWVzW2lbMV1dKQogICAgICAgIGVsc2U6cmVzdWx0LmFwcGVuZChpWzFdKyI9Iitjb29raWVzW2lbMV1dKyI7ICIpCiAgICBzYW1wbGUgPSAiIi5qb2luKHJlc3VsdCkKICAgIHNhbV8gICA9IHNhbXBsZS5yZXBsYWNlKCcgJywnJykKICAgIHNhbXBfICA9IHNhbV8uc3BsaXQoJzsnKQogICAgZmluYWwgPSAoJyVzOyAlczsgJXM7ICVzOyAlcyclKHNhbXBfWzRdLHNhbXBfWzFdLHNhbXBfWzBdLHNhbXBfWzVdLHNhbXBfWzNdKSkKICAgIHJldHVybiBmaW5hbApkZWYgY2VrX2FwayhoX29rLF9kYXB1bnRhXyk6CiAgICBhcGsgPSBbXQogICAgc2VzXyA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgdXJsID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8_dGFiPWFjdGl2ZSIKICAgIGRhdF9nYW1lID0gc2VzXy5nZXQodXJsLGNvb2tpZXM9eydjb29raWUnOl9kYXB1bnRhX30pCiAgICBkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpCiAgICBmb3JtXyAgICA9IGRhdGFnYW1lLmZpbmQoJ2Zvcm0nLG1ldGhvZD0ncG9zdCcpCiAgICBmb3IgYXN1IGluIGZvcm1fLmZpbmRfYWxsKCJoMyIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2VsZW5nID0gYXN1LmZpbmQoJ3NwYW4nKS50ZXh0CiAgICAgICAgICAgIGFway5hcHBlbmQoJ1xuICAg4oCiICcrY2VsZW5nKQogICAgICAgIGV4Y2VwdDpwYXNzCiAgICB1cmwyID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8_dGFiPWluYWN0aXZlIgogICAgZGF0X2dhbWUgPSBzZXNfLmdldCh1cmwyLGNvb2tpZXM9eydjb29raWUnOl9kYXB1bnRhX30pCiAgICBkYXRhZ2FtZSA9IHBhcihkYXRfZ2FtZS5jb250ZW50LCdodG1sLnBhcnNlcicpCiAgICBmb3JtXyAgICA9IGRhdGFnYW1lLmZpbmQoJ2Zvcm0nLG1ldGhvZD0ncG9zdCcpCiAgICBmb3IgYXN1IGluIGZvcm1fLmZpbmRfYWxsKCJoMyIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2VsZW5nID0gYXN1LmZpbmQoJ3NwYW4nKS50ZXh0CiAgICAgICAgICAgIGFway5hcHBlbmQoJ1xuICAg4oCiICcrY2VsZW5nKQogICAgICAgIGV4Y2VwdDpwYXNzCiAgICBwcmludChoX29rKycnLmpvaW4oYXBrKSkKZGVmIHRhaHVuKGZ4KToKICAgIGlmIGxlbihmeCk9PTE1OgogICAgICAgIGlmIGZ4WzoxMF0gaW4gWycxMDAwMDAwMDAwJ10gICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMDknCiAgICAgICAgZWxpZiBmeFs6OV0gaW4gWycxMDAwMDAwMDAnXSAgICAgICA6dGFodW56ID0gJyDigKIgMjAwOScKICAgICAgICBlbGlmIGZ4Wzo4XSBpbiBbJzEwMDAwMDAwJ10gICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDA5JwogICAgICAgIGVsaWYgZnhbOjddIGluIFsnMTAwMDAwMCcsJzEwMDAwMDEnLCcxMDAwMDAyJywnMTAwMDAwMycsJzEwMDAwMDQnLCcxMDAwMDA1J106dGFodW56ID0gJyDigKIgMjAwOScKICAgICAgICBlbGlmIGZ4Wzo3XSBpbiBbJzEwMDAwMDYnLCcxMDAwMDA3JywnMTAwMDAwOCcsJzEwMDAwMDknXTp0YWh1bnogPSAnIOKAoiAyMDEwJwogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDAxJ10gICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTAvMjAxMScKICAgICAgICBlbGlmIGZ4Wzo2XSBpbiBbJzEwMDAwMicsJzEwMDAwMyddIDp0YWh1bnogPSAnIOKAoiAyMDExLzIwMTInCiAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDQnXSAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxMi8yMDEzJwogICAgICAgIGVsaWYgZnhbOjZdIGluIFsnMTAwMDA1JywnMTAwMDA2J10gOnRhaHVueiA9ICcg4oCiIDIwMTMvMjAxNCcKICAgICAgICBlbGlmIGZ4Wzo2XSBpbiBbJzEwMDAwNycsJzEwMDAwOCddIDp0YWh1bnogPSAnIOKAoiAyMDE0LzIwMTUnCiAgICAgICAgZWxpZiBmeFs6Nl0gaW4gWycxMDAwMDknXSAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxNScKICAgICAgICBlbGlmIGZ4Wzo1XSBpbiBbJzEwMDAxJ10gICAgICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDE1LzIwMTYnCiAgICAgICAgZWxpZiBmeFs6NV0gaW4gWycxMDAwMiddICAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxNi8yMDE3JwogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDMnXSAgICAgICAgICAgOnRhaHVueiA9ICcg4oCiIDIwMTgnCiAgICAgICAgZWxpZiBmeFs6NV0gaW4gWycxMDAwNCddICAgICAgICAgICA6dGFodW56ID0gJyDigKIgMjAxOScKICAgICAgICBlbGlmIGZ4Wzo1XSBpbiBbJzEwMDA1J10gICAgICAgICAgIDp0YWh1bnogPSAnIOKAoiAyMDIwJwogICAgICAgIGVsaWYgZnhbOjVdIGluIFsnMTAwMDYnLCcxMDAwNycsJzEwMDA4J106dGFodW56ID0gJyDigKIgMjAyMScKICAgICAgICBlbHNlOnRhaHVuej0nJwogICAgZWxpZiBsZW4oZngpIGluIFs5LDEwXToKICAgICAgICB0YWh1bnogPSAnIOKAoiAyMDA4LzIwMDknCiAgICBlbGlmIGxlbihmeCk9PTg6CiAgICAgICAgdGFodW56ID0gJyDigKIgMjAwNy8yMDA4JwogICAgZWxpZiBsZW4oZngpPT03OgogICAgICAgIHRhaHVueiA9ICcg4oCiIDIwMDYvMjAwNycKICAgIGVsc2U6dGFodW56PScnCiAgICByZXR1cm4gdGFodW56CmNsYXNzIGNyYWNrOgogICAgZGVmIF9faW5pdF9fKHNlbGYsZmlsZXMpOgogICAgICAgIHNlbGYuYWRhID0gW10KICAgICAgICBzZWxmLmNwID0gW10KICAgICAgICBzZWxmLmtvID0gMAogICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ3JhY2sgV2l0aCBQYXNzd29yZCBEZWZhdWx0L01hbnVhbCBbZC9tXSclKE8sUCxPLFApKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICBpZiBmPT0iIjoKICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgZWxpZiBmIGluIFsnbScsJ00nLCcyJywnMDInLCcwMDInXToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwayA9IGZpbGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzID0gb3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgKCIgICAlcyIlKGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBzZWxmLmZsID0gW10KICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIHByaW50KCgiICAgJXMiJWUpKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0ZvciBleGFtcGxlIDogNzg2Nzg2LDEyMzQ1NiclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgc2VsZi5wd2xpc3QoKQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiBmIGluIFsnZCcsJ0QnLCcxJywnMDEnLCcwMDEnXToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwayA9IGZpbGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzID0gb3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgKCIgICAlcyIlKGUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBzZWxmLmZsID0gW10KICAgICAgICAgICAgICAgICAgICBzdGFydF9tZXRob2RlenooKQogICAgICAgICAgICAgICAgICAgIGtvcGkgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgICAgIGlmIGtvcGkgaW4gWycnXToKICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgZWxpZiBrb3BpIGluIFsnMScsJzAxJ106CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgi4oCiIilbMF0sInB3IjpnZW5lcmF0ZTEoaS5zcGxpdCgi4oCiIilbMV0pfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGVsaWYga29waSBpbiBbJzInLCcwMiddOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIuKAoiIpWzBdLCJwdyI6Z2VuZXJhdGUyKGkuc3BsaXQoIuKAoiIpWzFdKX0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6Y29udGludWUKICAgICAgICAgICAgICAgICAgICBlbGlmIGtvcGkgaW4gWyczJywnMDMnXToKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCLigKIiKVswXSwicHciOmdlbmVyYXRlMyhpLnNwbGl0KCLigKIiKVsxXSl9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OmNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgZWxpZiBrb3BpIGluIFsnNCcsJzA0J106CiAgICAgICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHBhc3MudHh0JykKICAgICAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgcGFzc2FuZ2thLnR4dCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhbWJhaF9wYXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGFtYmFoX3Bhc3NfYW5na2EoKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIuKAoiIpWzBdLCJwdyI6Z2VuZXJhdGU0KGkuc3BsaXQoIuKAoiIpWzFdKX0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6Y29udGludWUKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICBzdGFydF9tZXRob2QoKQogICAgICAgICAgICAgICAgICAgIHB1dCA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgICAgICAgICAgaWYgcHV0IGluIFsnJ106CiAgICAgICAgICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICAgICAgICAgIGVsaWYgcHV0IGluIFsnMScsJzAxJywnMDAxJywnYSddOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0JyaW5nIFVwIENQIE9wdGlvbj8gW3kvdF0nJShPLFAsTyxQKSkKICAgICAgICAgICAgICAgICAgICAgICAgcHVmID0gaW5wdXQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNDaG9vc2UgOiAnJShPLFAsTyxQKSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHVmIGluIFsnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhyZWFkUG9vbCgzNSkubWFwKHNlbGYuYXBpX29wc2ksc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5hcGksc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICBlbGlmIHB1dCBpbiBbJzInLCcwMicsJzAwMicsJ2InXToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNCcmluZyBVcCBDUCBPcHRpb24_IFt5L3RdJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHB1ZiA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHB1ZiBpbiBbJyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmIHB1ZiBpbiBbJzEnLCcwMScsJzAwMScsJ3knLCdZJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1iYXNpY19vcHNpLHNlbGYuZmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMicsJzAyJywnMDAyJywndCcsJ1QnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhyZWFkUG9vbCgzNSkubWFwKHNlbGYubWJhc2ljLHNlbGYuZmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgZWxpZiBwdXQgaW4gWyczJywnMDMnLCcwMDMnLCdjJ106CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQnJpbmcgdXAgQ1AgT3B0aW9uPyBbeS90XSclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdWYgaW4gWycnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycxJywnMDEnLCcwMDEnLCd5JywnWSddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5mcmVlX29wc2ksc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBwdWYgaW4gWycyJywnMDInLCcwMDInLCd0JywnVCddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDM1KS5tYXAoc2VsZi5mcmVlLHNlbGYuZmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoKCIgICAlcyIlZSkpCiAgICBkZWYgcHdsaXN0KHNlbGYpOgogICAgICAgIHNlbGYucHcgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0VudGVyIFBhc3N3b3JkIDogJyUoTyxQLE8sUCkpLnNwbGl0KCIsIikKICAgICAgICBpZiBsZW4oc2VsZi5wdykgPT0wOgogICAgICAgICAgICBzZWxmLnB3bGlzdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZm9yIGkgaW4gc2VsZi5mbDoKICAgICAgICAgICAgICAgIGkudXBkYXRlKHsicHciOnNlbGYucHd9KQogICAgICAgICAgICBzdGFydF9tZXRob2QoKQogICAgICAgICAgICBwdXQgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICBwcmludCgnJXPilZEnJShPKSkKICAgICAgICAgICAgaWYgcHV0IGluIFsnJ106CiAgICAgICAgICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJc2kgWWFuZyBCZW5hciclKE0sUCxNLFApKQogICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgIGVsaWYgcHV0IGluIFsnMScsJzAxJywnMDAxJywnYSddOgogICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNCcmluZyB1cCBDUCBPcHRpb24_IFt5L3RdJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgaWYgcHVmIGluIFsnJ106CiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToKICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5hcGlfb3BzaSxzZWxmLmZsKQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMicsJzAyJywnMDAyJywndCcsJ1QnXToKICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5hcGksc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgIGVsaWYgcHV0IGluIFsnMicsJzAyJywnMDAyJywnYiddOgogICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNCcmluZyB1cCBDUCBvcHRpb24_IFt5L3RdJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgaWYgcHVmIGluIFsnJ106CiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToKICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYmFzaWNfb3BzaSxzZWxmLmZsKQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMicsJzAyJywnMDAyJywndCcsJ1QnXToKICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYmFzaWMsc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgIGVsaWYgcHV0IGluIFsnMycsJzAzJywnMDAzJywnYyddOgogICAgICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNCcmluZyB1cCBDUCBvcHRpb24_IFt5L3RdJyUoTyxQLE8sUCkpCiAgICAgICAgICAgICAgICBwdWYgPSBpbnB1dCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0Nob29zZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICAgICAgaWYgcHVmIGluIFsnJ106CiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgIGVsaWYgcHVmIGluIFsnMScsJzAxJywnMDAxJywneScsJ1knXToKICAgICAgICAgICAgICAgICAgICBzdGFydGVkKCkKICAgICAgICAgICAgICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5mcmVlX29wc2ksc2VsZi5mbCkKICAgICAgICAgICAgICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspCiAgICAgICAgICAgICAgICAgICAgZXhpdCgpCiAgICAgICAgICAgICAgICBlbGlmIHB1ZiBpbiBbJzInLCcwMicsJzAwMicsJ3QnLCdUJ106CiAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCgpCiAgICAgICAgICAgICAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuZnJlZSxzZWxmLmZsKQogICAgICAgICAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgICAgICAgICBleGl0KCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgamFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzSXNpIFlhbmcgQmVuYXInJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICBtZW51KCkKICAgIGRlZiBhcGkoc2VsZixmbCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6CiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfYXBpKGZsLmdldCgiaWQiKSwKICAgICAgICAgICAgICAgICAgICBpLCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbSIpCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGtlID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgZmwuZ2V0KCJpZCIpICsgIj9hY2Nlc3NfdG9rZW49IiArIG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICB0dGwgPSB0dFsiYmlydGhkYXkiXQogICAgICAgICAgICAgICAgICAgICAgICBtLGQseSA9IHR0bC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXPigKIlcyVzJXMiJShmbC5nZXQoImlkIiksaSxkLG0seSkpCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc-KAoiVz4oCiJXMlcyVzXG4iJShmbC5nZXQoImlkIiksaSxkLG0seSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0KEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgICAgICAgICAgICAgbSA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICBkID0gIiAiCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiICIKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcwogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFLQV9BTUFOREElc10gJXMg4oCiICVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSkpKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYua28rPTEKICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNDcmFjayVzXeKAoj5bJXMlcy8lcyVzXeKAoj5bJXNPSzolcyVzXeKAoj5bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2VsZi5hcGkoZmwpCiAgICBkZWYgYXBpX29wc2koc2VsZixmbCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6CiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfYXBpKGZsLmdldCgiaWQiKSwKICAgICAgICAgICAgICAgICAgICBpLCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbSIpCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGtlID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgZmwuZ2V0KCJpZCIpICsgIj9hY2Nlc3NfdG9rZW49IiArIG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICB0dGwgPSB0dFsiYmlydGhkYXkiXQogICAgICAgICAgICAgICAgICAgICAgICBtLGQseSA9IHR0bC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMg4oCiICVzICVzICVzJXMiJShPLFAsTyxmbC5nZXQoImlkIiksaSxkLG0seSx0YWh1bihmbC5nZXQoImlkIikpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXPigKIlcyVzJXMiJShmbC5nZXQoImlkIiksaSxkLG0seSkpCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc-KAoiVz4oCiJXMlcyVzXG4iJShmbC5nZXQoImlkIiksaSxkLG0seSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0KEtleUVycm9yLCBJT0Vycm9yKToKICAgICAgICAgICAgICAgICAgICAgICAgbSA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICBkID0gIiAiCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiICIKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6cGFzcwogICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFLQV9BTUFOREElc10gJXMg4oCiICVzJXMgICAgICIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSkpKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc-KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc-KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoKICAgICAgICAgICAgICAgICAgICBwcmludCgiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyVzICAgICAiJShILFAsSCxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkKICAgICAgICAgICAgICAgICAgICBwcmludCgiIikKICAgICAgICAgICAgICAgICAgICBzZWxmLmFkYS5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgb3BlbigiT0svJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZTpjb250aW51ZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmtvKz0xCiAgICAgICAgICAgIHByaW50KCJcciVzWyVzQ3JhY2slc13igKI-WyVzJXMvJXMlc13igKI-WyVzT0s6JXMlc13igKI-WyVzQ1A6JXMlc10lcyIlKE8sUCxPLFAsc2VsZi5rbyxsZW4oc2VsZi5mbCksTyxQLGxlbihzZWxmLmFkYSksTyxQLGxlbihzZWxmLmNwKSxPLFApLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHNlbGYuYXBpX29wc2koZmwpCiAgICBkZWYgbWJhc2ljKHNlbGYsZmwpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOgogICAgICAgICAgICAgICAgbG9nID0gbG9nX21iYXNpYyhmbC5nZXQoImlkIiksCiAgICAgICAgICAgICAgICAgICAgaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikKICAgICAgICAgICAgICAgIGlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAga2UgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBmbC5nZXQoImlkIikgKyAiP2FjY2Vzc190b2tlbj0iICsgb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgdHQgPSBqc29uLmxvYWRzKGtlLnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgIHR0bCA9IHR0WyJiaXJ0aGRheSJdCiAgICAgICAgICAgICAgICAgICAgICAgIG0sZCx5ID0gdHRsLnNwbGl0KCIvIikKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGJ1bGFuX3R0bFttXQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyDigKIgJXMgJXMgJXMlcyIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLGQsbSx5LHRhaHVuKGZsLmdldCgiaWQiKSkpKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNwLmFwcGVuZCgiJXPigKIlc-KAoiVzJXMlcyIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkKICAgICAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXPigKIlcyVzJXNcbiIlKGZsLmdldCgiaWQiKSxpLGQsbSx5KSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBleGNlcHQoS2V5RXJyb3IsIElPRXJyb3IpOgogICAgICAgICAgICAgICAgICAgICAgICBtID0gIiAiCiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAiICIKICAgICAgICAgICAgICAgICAgICAgICAgeSA9ICIgIgogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOgogICAgICAgICAgICAgICAgICAgIGhfb2sgPSAiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSksUCkKICAgICAgICAgICAgICAgICAgICBjZWtfYXBrKGhfb2ssa29raShsb2cuZ2V0KCJjb29raWVzIikpKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYua28rPTEKICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNDcmFjayVzXeKAoj5bJXMlcy8lcyVzXeKAoj5bJXNPSzolcyVzXeKAoj5bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2VsZi5tYmFzaWMoZmwpCiAgICBkZWYgbWJhc2ljX29wc2koc2VsZixmbCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6CiAgICAgICAgICAgICAgICBsb2cgPSBsb2dfbWJhc2ljKGZsLmdldCgiaWQiKSwKICAgICAgICAgICAgICAgICAgICBpLCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQogICAgICAgICAgICAgICAgaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBrZSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGZsLmdldCgiaWQiKSArICI_YWNjZXNzX3Rva2VuPSIgKyBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKQogICAgICAgICAgICAgICAgICAgICAgICB0dCA9IGpzb24ubG9hZHMoa2UudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0KICAgICAgICAgICAgICAgICAgICAgICAgbSxkLHkgPSB0dGwuc3BsaXQoIi8iKQogICAgICAgICAgICAgICAgICAgICAgICBtID0gYnVsYW5fdHRsW21dCiAgICAgICAgICAgICAgICAgICAgICAgIGhfY3AgPSAiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyDigKIgJXMgJXMgJXMlcyIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLGQsbSx5LHRhaHVuKGZsLmdldCgiaWQiKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNla19sb2coZmwuZ2V0KCJpZCIpLGksaF9jcCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc-KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc-KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICIKICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MKICAgICAgICAgICAgICAgICAgICBoX2NwID0gIlxyJXNbJXNSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkKICAgICAgICAgICAgICAgICAgICBjZWtfbG9nKGZsLmdldCgiaWQiKSxpLGhfY3ApCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOgogICAgICAgICAgICAgICAgICAgIGhfb2sgPSAiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSksUCkKICAgICAgICAgICAgICAgICAgICBjZWtfYXBrKGhfb2ssa29raShsb2cuZ2V0KCJjb29raWVzIikpKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYua28rPTEKICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNDcmFjayVzXeKAoj5bJXMlcy8lcyVzXeKAoj5bJXNPSzolcyVzXeKAoj5bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2VsZi5tYmFzaWNfb3BzaShmbCkKICAgIGRlZiBmcmVlKHNlbGYsZmwpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOgogICAgICAgICAgICAgICAgbG9nID0gbG9nX2ZyZWUoZmwuZ2V0KCJpZCIpLAogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20iKQogICAgICAgICAgICAgICAgaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBrZSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGZsLmdldCgiaWQiKSArICI_YWNjZXNzX3Rva2VuPSIgKyBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKQogICAgICAgICAgICAgICAgICAgICAgICB0dCA9IGpzb24ubG9hZHMoa2UudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0KICAgICAgICAgICAgICAgICAgICAgICAgbSxkLHkgPSB0dGwuc3BsaXQoIi8iKQogICAgICAgICAgICAgICAgICAgICAgICBtID0gYnVsYW5fdHRsW21dCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcciVzWyVzUkFLQV9BTUFOREElc10gJXMg4oCiICVzIOKAoiAlcyAlcyAlcyVzIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksZCxtLHksdGFodW4oZmwuZ2V0KCJpZCIpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc-KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc-KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICIKICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MKICAgICAgICAgICAgICAgICAgICBwcmludCgiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyVzICAgICAiJShPLFAsTyxmbC5nZXQoImlkIiksaSx0YWh1bihmbC5nZXQoImlkIikpKSkKICAgICAgICAgICAgICAgICAgICBzZWxmLmNwLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbGlmIGxvZy5nZXQoInN0YXR1cyIpPT0ic3VjY2VzcyI6CiAgICAgICAgICAgICAgICAgICAgaF9vayA9ICJcciVzWyVzUkFLQV9BTUFOREElc10gJXMg4oCiICVzJXMlcyAgICAgIiUoSCxQLEgsZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSxQKQogICAgICAgICAgICAgICAgICAgIGNla19hcGsoaF9vayxrb2tpKGxvZy5nZXQoImNvb2tpZXMiKSkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGEuYXBwZW5kKCIlc-KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIG9wZW4oIk9LLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc-KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5rbys9MQogICAgICAgICAgICBwcmludCgiXHIlc1slc0NyYWNrJXNd4oCiPlslcyVzLyVzJXNd4oCiPlslc09LOiVzJXNd4oCiPlslc0NQOiVzJXNdJXMiJShPLFAsTyxQLHNlbGYua28sbGVuKHNlbGYuZmwpLE8sUCxsZW4oc2VsZi5hZGEpLE8sUCxsZW4oc2VsZi5jcCksTyxQKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBzZWxmLmZyZWUoZmwpCiAgICBkZWYgZnJlZV9vcHNpKHNlbGYsZmwpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOgogICAgICAgICAgICAgICAgbG9nID0gbG9nX2ZyZWUoZmwuZ2V0KCJpZCIpLAogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20iKQogICAgICAgICAgICAgICAgaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBrZSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGZsLmdldCgiaWQiKSArICI_YWNjZXNzX3Rva2VuPSIgKyBvcGVuKCJ0b2tlbi50eHQiLCJyIikucmVhZCgpKQogICAgICAgICAgICAgICAgICAgICAgICB0dCA9IGpzb24ubG9hZHMoa2UudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgdHRsID0gdHRbImJpcnRoZGF5Il0KICAgICAgICAgICAgICAgICAgICAgICAgbSxkLHkgPSB0dGwuc3BsaXQoIi8iKQogICAgICAgICAgICAgICAgICAgICAgICBtID0gYnVsYW5fdHRsW21dCiAgICAgICAgICAgICAgICAgICAgICAgIGhfY3AgPSAiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyDigKIgJXMgJXMgJXMlcyIlKE8sUCxPLGZsLmdldCgiaWQiKSxpLGQsbSx5LHRhaHVuKGZsLmdldCgiaWQiKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNla19sb2coZmwuZ2V0KCJpZCIpLGksaF9jcCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc-KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc-KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICIKICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MKICAgICAgICAgICAgICAgICAgICBoX2NwID0gIlxyJXNbJXNSQUtBX0FNQU5EQSVzXSAlcyDigKIgJXMlcyAgICAgIiUoTyxQLE8sZmwuZ2V0KCJpZCIpLGksdGFodW4oZmwuZ2V0KCJpZCIpKSkKICAgICAgICAgICAgICAgICAgICBjZWtfbG9nKGZsLmdldCgiaWQiKSxpLGhfY3ApCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcC5hcHBlbmQoIiVz4oCiJXMiJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgb3BlbigiQ1AvJXMudHh0IiUodGFuZ2dhbCksImErIikud3JpdGUoIiVz4oCiJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOgogICAgICAgICAgICAgICAgICAgIGhfb2sgPSAiXHIlc1slc1JBS0FfQU1BTkRBJXNdICVzIOKAoiAlcyVzJXMgICAgICIlKEgsUCxILGZsLmdldCgiaWQiKSxpLHRhaHVuKGZsLmdldCgiaWQiKSksUCkKICAgICAgICAgICAgICAgICAgICBjZWtfYXBrKGhfb2ssa29raShsb2cuZ2V0KCJjb29raWVzIikpKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYua28rPTEKICAgICAgICAgICAgcHJpbnQoIlxyJXNbJXNDcmFjayVzXeKAoj5bJXMlcy8lcyVzXeKAoj5bJXNPSzolcyVzXeKAoj5bJXNDUDolcyVzXSVzIiUoTyxQLE8sUCxzZWxmLmtvLGxlbihzZWxmLmZsKSxPLFAsbGVuKHNlbGYuYWRhKSxPLFAsbGVuKHNlbGYuY3ApLE8sUCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgc2VsZi5mcmVlX29wc2koZmwpCmRlZiB0YXJnZXQoKToKICAgIHRyeTp0b2tlbiA9IG9wZW4oJ3Rva2VuLnR4dCcsJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6amFsYW4oJyVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzVG9rZW4vQ29va2llcyBJbnZhbGlkJyUoTSxQLE0sUCkpO21lbnVfbG9nKCkKICAgIGlkdCA9IGlucHV0KCIlc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzSUQgVGFyZ2V0IDogIiUoTyxQLE8sUCkpCiAgICB0cnk6CiAgICAgICAgenggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI_YWNjZXNzX3Rva2VuPSIrdG9rZW4pO3p5ID0ganNvbi5sb2Fkcyh6eC50ZXh0KQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNJRCBUaWRhayBEaXRlbXVrYW4nJShNLFAsTSxQKSk7bWVudSgpCiAgICB0cnk6bm0gPSB6eVsibmFtZSJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOm5tID0gKCItIikKICAgIHRyeTpuZCA9IHp5WyJmaXJzdF9uYW1lIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bmQgPSAoIi0iKQogICAgdHJ5Om50ID0genlbIm1pZGRsZV9uYW1lIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bnQgPSAoIi0iKQogICAgdHJ5Om5iID0genlbImxhc3RfbmFtZSJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOm5iID0gKCItIikKICAgIHRyeTp1dCA9IHp5WyJiaXJ0aGRheSJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnV0ID0gKCItIikKICAgIHRyeTpnZCA9IHp5WyJnZW5kZXIiXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpnZCA9ICgiLSIpCiAgICB0cnk6ZW0gPSB6eVsiZW1haWwiXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTplbSA9ICgiLSIpCiAgICB0cnk6bGsgPSB6eVsibGluayJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOmxrID0gKCItIikKICAgIHRyeTp1cyA9IHp5WyJ1c2VybmFtZSJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnVzID0gKCItIikKICAgIHRyeTpyZyA9IHp5WyJyZWxpZ2lvbiJdCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnJnID0gKCItIikKICAgIHRyeTpybCA9IHp5WyJyZWxhdGlvbnNoaXBfc3RhdHVzIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6cmwgPSAoIi0iKQogICAgdHJ5OnJscyA9IHp5WyJzaWduaWZpY2FudF9vdGhlciJdWyJuYW1lIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6cmxzID0gKCItIikKICAgIHRyeTpsYyA9IHp5WyJsb2NhdGlvbiJdWyJuYW1lIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bGMgPSAoIi0iKQogICAgdHJ5Omh0ID0genlbImhvbWV0b3duIl1bIm5hbWUiXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTpodCA9ICgiLSIpCiAgICB0cnk6YWIgPSB6eVsiYWJvdXQiXQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKTphYiA9ICgiLSIpCiAgICB0cnk6bG8gPSB6eVsibG9jYWxlIl0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6bG8gPSAoIi0iKQogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNOYW1hIDogJXMnJShPLFAsTyxQLG5tKSkKICAgIGphbGFuKCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzTmFtYSBEZXBhbiA6ICVzJyUoTyxQLE8sUCxuZCkpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc05hbWEgVGVuZ2FoIDogJXMnJShPLFAsTyxQLG50KSkKICAgIGphbGFuKCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzTmFtYSBCZWxha2FuZyA6ICVzJyUoTyxQLE8sUCxuYikpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc1RUTCA6ICVzJyUoTyxQLE8sUCx1dCkpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0dlbmRlciA6ICVzJyUoTyxQLE8sUCxnZCkpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0VtYWlsIDogJXMnJShPLFAsTyxQLGVtKSkKICAgIGphbGFuKCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzTGluayA6ICVzJyUoTyxQLE8sUCxsaykpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc1VzZXJuYW1lIDogJXMnJShPLFAsTyxQLHVzKSkKICAgIGphbGFuKCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQWdhbWEgOiAlcyclKE8sUCxPLFAscmcpKQogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNTdGF0dXMgSHVidW5nYW4gOiAlcyclKE8sUCxPLFAscmwpKQogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNIdWJ1bmdhbiBEZW5nYW4gOiAlcyclKE8sUCxPLFAscmxzKSkKICAgIGphbGFuKCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzVGVtcGF0IFRpbmdnYWwgOiAlcyclKE8sUCxPLFAsbGMpKQogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUZW1wYXQgQXNhbCA6ICVzJyUoTyxQLE8sUCxodCkpCiAgICBqYWxhbignJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc1RlbnRhbmcgOiAlcyclKE8sUCxPLFAsYWIpKQogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNMb2NhbGUgOiAlcyclKE8sUCxPLFAsbG8pKQogICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICBpbnB1dCgnJXPilZrilZDilZDCrlsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkKICAgIG1lbnUoKQpkZWYgdGVtYW5fdGFyZ2V0KCk6CiAgICBpdCA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzSUQgVGFyZ2V0IDogJyUoTyxQLE8sUCkpCiAgICB0cnk6CiAgICAgICAgdG9rZW4gPSBvcGVuKCd0b2tlbi50eHQnLCdyJykucmVhZCgpCiAgICAgICAgbW0gPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyclKGl0LHRva2VuKSkKICAgICAgICBubiA9IGpzb24ubG9hZHMobW0udGV4dCkKICAgICAgICBwcmludCAoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNOYW1lIDogJXMnJShPLFAsTyxQLG5uWyduYW1lJ10pKQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBqYWxhbignJXPilZrilZDilZDCrlslcyElc13il43inqQgJXNUb2tlbi9Db29raWVzIEludmFsaWQnJShNLFAsTSxQKSkKICAgICAgICBtZW51X2xvZygpCiAgICB0dD1bXQogICAgdGU9W10KICAgIGxpbSA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzTGltaXQgRHVtcCA6ICclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWRJXMnJShPLFApKQogICAgYWRhID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9mcmllbmRzP2xpbWl0PSVzJmFjY2Vzc190b2tlbj0lcyclKGl0LGxpbSx0b2tlbikpCiAgICBpZGkgPSBqc29uLmxvYWRzKGFkYS50ZXh0KQogICAgZm9yIHggaW4gaWRpWydkYXRhJ106CiAgICAgICAgdHQuYXBwZW5kKHhbJ2lkJ10pCiAgICBmb3IgaWQgaW4gdHQ6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBhZGEyID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9mcmllbmRzP2FjY2Vzc190b2tlbj0lcyclKGlkLHRva2VuKSkKICAgICAgICAgICAgaWRpMiA9IGpzb24ubG9hZHMoYWRhMi50ZXh0KQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgYiBpbiBpZGkyWydkYXRhJ106CiAgICAgICAgICAgICAgICAgICAgdGUuYXBwZW5kKGJbJ2lkJ10pCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50KCfilaDilZDilZDCrlshXeKXjeKepCBQcml2YXRlJykKICAgICAgICAgICAgcHJpbnQoJ-KVoOKVkOKVkMKuW-KAol3il43inqQnLGlkLCfigKInLGxlbih0ZSkpCiAgICAgICAgICAgIHRlLmNsZWFyKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHByaW50KCfilaDilZDilZDCrlshXeKXjeKepCBTcGFtIEFjY291bnRzJykKICAgIHByaW50KCfilZEnKQogICAgaW5wdXQoJ-KVmuKVkOKVkMKuWyBSZXR1cm4gXScpCiAgICBtZW51KCkKZGVmIGhhc2lsKCk6CiAgICBjbGVhcigpCiAgICBiYW5uZXIoKQogICAgamFsYW4oJyVz4pWU4pWQ4pWQwq5bICVzQ3JhY2sgUmVzdWx0cyAlc10nJShPLFAsTykpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMSVzXeKXjeKepCAlc0NoZWNrIFJlc3VsdCBPSyclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMyJXNd4peN4p6kICVzQ2hlY2sgcmVzdWx0IENQJyUoTyxQLE8sUCkpCiAgICBjaCA9IGlucHV0KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQ2hvb3NlIDogJyUoTyxQLE8sUCkpCiAgICBpZiBjaCBpbiBbJyddOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0lzaSBZYW5nIEJlbmFyJyUoTSxQLE0sUCkpCiAgICAgICAgbWVudSgpCiAgICBlbGlmIGNoIGluIFsnMScsJzAxJywnMDAxJywnYSddOgogICAgICAgIHRyeToKICAgICAgICAgICAgb2tsID0gb3MubGlzdGRpcigiT0siKQogICAgICAgICAgICBwcmludCgnJXPilZEnJShPKSkKICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMgQ3JhY2sgUmVzdWx0cyBTdG9yZWQgaW4gRmlsZSBPSyVzXSclKE8sUCxPKSkKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGZvciBmaWxlIGluIG9rbDoKICAgICAgICAgICAgICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzJXMnJShPLFAsTyxQLGZpbGUpKQogICAgICAgICAgICBwcmludCgnJXPilZEnJShPKSkKICAgICAgICAgICAgZmlsZXMgPSBpbnB1dCgnJXPilZrilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0VudGVyIEZpbGUgTmFtZSA6ICclKE8sUCxPLFApKQogICAgICAgICAgICBwcmludCgnJykKICAgICAgICAgICAgaWYgZmlsZXMgPT0gIiI6CiAgICAgICAgICAgICAgICBqYWxhbignJXPilZDilZDilZDCrlslcyElc13il43inqQgJXNDb3JyZWN0IENvbnRlbnQnJShNLFAsTSxQKSkKICAgICAgICAgICAgICAgIGhhc2lsKCkKICAgICAgICAgICAgb3Muc3lzdGVtKCdjYXQgT0svJXMnJShmaWxlcykpCiAgICAgICAgICAgIHBwcCA9IG9wZW4oIk9LLyVzIiUoZmlsZXMpKS5yZWFkKCkuc3BsaXRsaW5lcygpCiAgICAgICAgICAgIGRlbDEgPSAoIiVzIiUoZmlsZXMpKS5yZXBsYWNlKCItIiwgIiAiKS5yZXBsYWNlKCIudHh0IiwgIiIpCiAgICAgICAgICAgIHByaW50KCdcbiVz4pWU4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUb3RhbCBDcmFjayBSZXN1bHQgRGF0ZSAlcyBpcyAlcyBBY2NvdW50JyUoTyxQLE8sUCxkZWwxLGxlbihwcHApKSkKICAgICAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslcyBObyBSZXN1bHRzIEZvdW5kICVzXSclKE0sUCxNKSkKICAgIGVsaWYgY2ggaW4gWycyJywnMDInLCcwMDInLCdiJ106CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjcGwgPSBvcy5saXN0ZGlyKCJDUCIpCiAgICAgICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslcyBDcmFjayBSZXN1bHRzIFN0b3JlZCBpbiBDUCBGaWxlcyAlc10nJShPLFAsTykpCiAgICAgICAgICAgIHByaW50KCclc-KVkSclKE8pKQogICAgICAgICAgICBmb3IgZmlsZSBpbiBjcGw6CiAgICAgICAgICAgICAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlcyVzJyUoTyxQLE8sUCxmaWxlKSkKICAgICAgICAgICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICAgICAgICAgIGZpbGVzID0gaW5wdXQoJyVz4pWa4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNFbnRlciBGaWxlIE5hbWUgOiAnJShPLFAsTyxQKSkKICAgICAgICAgICAgcHJpbnQoJycpCiAgICAgICAgICAgIGlmIGZpbGVzID09ICIiOgogICAgICAgICAgICAgICAgamFsYW4oJyVz4pWQ4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzQ29ycmVjdCBDb250ZW50JyUoTSxQLE0sUCkpCiAgICAgICAgICAgICAgICBoYXNpbCgpCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2F0IENQLyVzJyUoZmlsZXMpKQogICAgICAgICAgICBwcHAgPSBvcGVuKCJDUC8lcyIlKGZpbGVzKSkucmVhZCgpLnNwbGl0bGluZXMoKQogICAgICAgICAgICBkZWwxID0gKCIlcyIlKGZpbGVzKSkucmVwbGFjZSgiLSIsICIgIikucmVwbGFjZSgiLnR4dCIsICIiKQogICAgICAgICAgICBwcmludCgnXG4lc-KVlOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzVG90YWwgQ3JhY2sgUmVzdWx0IERhdGUgJXMgaXMgJXMgQWNjb3VudCclKE8sUCxPLFAsZGVsMSxsZW4ocHBwKSkpCiAgICAgICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICAgICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMgTm8gUmVzdWx0cyBGb3VuZCAlc10nJShNLFAsTSkpCiAgICBlbHNlOgogICAgICAgIGphbGFuKCclc-KVmuKVkOKVkMKuWyVzISVzXeKXjeKepCAlc0NvcnJlY3QgQ29udGVudCclKE0sUCxNLFApKQogICAgICAgIG1lbnUoKQogICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICBpbnB1dCgnJXPilZrilZDilZDCrlsgJXNSZXR1cm4gJXNdJXMnJShPLFAsTyxQKSkKICAgIG1lbnUoKQpkZWYgbG9nX2hhc2lsKHVzZXIsIHBhc3cpOgogICAgdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyB2aXZvIDE5MDQgQnVpbGQvUlAxQS4yMDA3MjAuMDEyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzgzLjAuNDEwMy4xMDYgTW9iaWxlIFNhZmFyaS81MzcuMzYiCiAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgIHNlcy5oZWFkZXJzLnVwZGF0ZSh7CiAgICAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwKICAgICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsCiAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwKICAgICJvcmlnaW4iOiBob3N0LAogICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICAgInVzZXItYWdlbnQiOiB1YSwKICAgICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsCiAgICAic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLAogICAgInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwKICAgICJzZWMtZmV0Y2gtdXNlciI6ICI_MSIsCiAgICAic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLAogICAgInJlZmVyZXIiOiBob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwKICAgICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IgogICAgfSkKICAgIGRhdGEgPSB7fQogICAgZ2VkID0gcGFyKHNlcy5nZXQoaG9zdCsiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsIGhlYWRlcnM9eyJ1c2VyLWFnZW50Ijp1YX0pLnRleHQsICJodG1sLnBhcnNlciIpCiAgICBmbSA9IGdlZC5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkKICAgIGxpc3QgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iLCJiaV94cndoIl0KICAgIGZvciBpIGluIGZtLmZpbmRfYWxsKCJpbnB1dCIpOgogICAgICAgIGlmIGkuZ2V0KCJuYW1lIikgaW4gbGlzdDoKICAgICAgICAgICAgZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICBkYXRhLnVwZGF0ZSh7ImVtYWlsIjp1c2VyLCJwYXNzIjpwYXN3fSkKICAgIHRyeToKICAgICAgICBydW4gPSBwYXIoc2VzLnBvc3QoaG9zdCtmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuVG9vTWFueVJlZGlyZWN0czoKICAgICAgICBwcmludCgiJXNbJXMhJXNdICVzU3BhbSBBY2NvdW50cyIlKE0sUCxNLFApKQogICAgaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXM6CiAgICAgICAgcHJpbnQoIiVzWyVz4oCiJXNdICVzQWNjb3VudCBPSyBObyBDaGVja3BvaW50dCIlKEgsUCxILFApKQogICAgZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXM6CiAgICAgICAgZm9ybSA9IHJ1bi5maW5kKCJmb3JtIikKICAgICAgICBkdHNnID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiZmJfZHRzZyJ9KVsidmFsdWUiXQogICAgICAgIGp6c3QgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJqYXpvZXN0In0pWyJ2YWx1ZSJdCiAgICAgICAgbmggICA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Im5oIn0pWyJ2YWx1ZSJdCiAgICAgICAgZGF0YUQgPSB7CiAgICAgICAgICAgICJmYl9kdHNnIjogZHRzZywKICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLAogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsCiAgICAgICAgICAgICJqYXpvZXN0IjoganpzdCwKICAgICAgICAgICAgImNoZWNrcG9pbnRfZGF0YSI6IiIsCiAgICAgICAgICAgICJzdWJtaXRbQ29udGludWVdIjoiTGFuanV0a2FuIiwKICAgICAgICAgICAgIm5oIjogbmgKICAgICAgICB9CiAgICAgICAgeG54eCA9IHBhcihzZXMucG9zdChob3N0K2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgICAgIG5nZXcgPSBbeXkudGV4dCBmb3IgeXkgaW4geG54eC5maW5kX2FsbCgib3B0aW9uIildCiAgICAgICAgaWYoc3RyKGxlbihuZ2V3KSk9PSIwIik6CiAgICAgICAgICAgIHByaW50KCIlc1slc-KAoiVzXSAlc09uZSBUYXAgQWNjb3VudCIlKEgsUCxILFApKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCIlc1slc-KAoiVzXSAlc1RoZXJlaXMgJXMgT3B0aW9uICIlKE8sUCxPLFAsc3RyKGxlbihuZ2V3KSkpKQogICAgICAgIGZvciBvcHQgaW4gcmFuZ2UobGVuKG5nZXcpKToKICAgICAgICAgICAgcHJpbnQoIiAiKjMsIHN0cihvcHQrMSkrIi4gIituZ2V3W29wdF0pCiAgICBlbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6CiAgICAgICAgb2ggPSBydW4uZmluZCgiZGl2Iix7ImlkIjoibG9naW5fZXJyb3IifSkuZmluZCgiZGl2IikudGV4dAogICAgICAgIHByaW50KCIlc1slcyElc10gJXMlcyIlKE0sUCxNLFAsb2gpKQogICAgZWxzZToKICAgICAgICBwcmludCgiJXNbJXMhJXNdICVzUGFzc3dvcmQgSGFzIENoYW5nZWQiJShNLFAsTSxQKSkKZGVmIGNla19oYXNpbCgpOgogICAgamFsYW4oJyVz4pWg4pWQ4pWQwq5bICVzQ2hlY2sgQ3JhY2sgUmVzdWx0IEFjY291bnQgT3B0aW9ucyAlc10nJShPLFAsTykpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzRXhhbXBsZSBGaWxlIDogQ1AvJXMudHh0JyUoTyxQLE8sUCx0YW5nZ2FsKSkKICAgIGZpbGVzID0gaW5wdXQoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNGaWxlIDogJyUoTyxQLE8sUCkpCiAgICB0cnk6CiAgICAgICAgYnVrYV9iYWp1ID0gb3BlbihmaWxlcywiciIpLnJlYWRsaW5lcygpCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgcHJpbnQoIiVz4pWa4pWQ4pWQwq5bJXMhJXNd4peN4p6kICVzRmlsZSBOb3QgRXhpc3RpbmciJShNLFAsTSxQKSkKICAgICAgICB0aW1lLnNsZWVwKDIpOyBjZWtfaGFzaWwoKQogICAgcHJpbnQoIiVz4pWa4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNOdW1iZXIgb2YgQWNjb3VudHMgOiAlcyIlKE8sUCxPLFAsc3RyKGxlbihidWthX2JhanUpKSkpCiAgICBwcmludCgiIikKICAgIGZvciBtZW1layBpbiBidWthX2JhanU6CiAgICAgICAga29udG9sID0gbWVtZWsucmVwbGFjZSgiXG4iLCIiKQogICAgICAgIHRpdGlkICA9IGtvbnRvbC5zcGxpdCgi4oCiIikKICAgICAgICBwcmludCgiJXNbJXPigKIlc10gJXNDaGVjayBMb2dpbiA6ICVzIiUoTyxQLE8sUCxrb250b2wpKQogICAgICAgIHRyeToKICAgICAgICAgICAgbG9nX2hhc2lsKHRpdGlkWzBdLCB0aXRpZFsxXSkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcHJpbnQoIiIpCiAgICBwcmludCgiIikKICAgIHByaW50KCclc-KVlOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzIENoZWNraW5nIFByb2Nlc3MgQ29tcGxldGUnJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgaW5wdXQoJyVz4pWa4pWQ4pWQwq5bICVzUmV0dXJuICVzXSVzJyUoTyxQLE8sUCkpCiAgICBtZW51KCkKZGVmIHZhcl9tZW51KCk6CiAgICBwcmludCgnJXPilZTilZDilZDCrlsgJXNTZWxlY3QgTWV0aG9kIExvZ2luICVzXSclKE8sUCxPKSkKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMxJXNd4peN4p6kICVzTG9naW4gd2l0aCBUb2tlbiclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMyJXNd4peN4p6kICVzTG9naW4gd2l0aCBDb29raWVzJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczMlc13il43inqQgJXNTY3JpcHQgVXNhZ2UgVHV0b3JpYWwnJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzNCVzXeKXjeKepCAlc0luZm8gQXV0aG9yICYgVGVhbSBQcm9qZWN0JyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczAlc13il43inqQgJXNHbyBCYWNrJyUoTyxQLE8sUCkpCmRlZiB2YXJfdHV0b3IoKToKICAgIG1sYWt1KCclc-KVlOKVkOKVkMKuWyVzIFRpcHMgJiBUdXRvcmlhbCAlc10nJShPLFAsTykpCiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMSVzXeKXjeKepCAlc0hvdyB0byBUYWtlIFRva2VuJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczIlc13il43inqQgJXNIb3cgdG8gVGFrZSBDb29raWVzJyUoTyxQLE8sUCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslczMlc13il43inqQgJXNIb3cgdG8gR2V0IFRhcmdldCclKE8sUCxPLFApKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM0JXNd4peN4p6kICVzV2F5cyBEdXJpbmcgdGhlIENyYWNrIFByb2Nlc3MnJShPLFAsTyxQKSkKZGVmIHR1dG9yX3RhcmdldCgpOgogICAgbWxha3UoJyVz4pWg4pWQ4pWQ4pWQ4pWm4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXJyUoTykpCiAgICBtbGFrdSgnJXPilZEgJXMxICVz4pWRICVzUHJlcGFyZSBhIFNhY3JpZmljaWFsIEFjY291bnQgSW4gQ2hyb21lIEZvciBDcmFja2luZyBQcm9jZXNzICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczIgJXPilZEgJXNDaGFuZ2UgdGhlIFZpY3RpbSBBY2NvdW50IFBhc3N3b3JkIEZpcnN0ICAgICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczMgJXPilZEgJXNGaW5kIFJhbmRvbSBBY2NvdW50IFRhcmdldHMsIEZyaWVuZHMgTGlzdCBNdXN0IEJlIFB1YmxpYyAgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczQgJXPilZEgJXNGcmllbmRzIChGTCkgRnJlZSwgQ2FuIGJlIDFLLCAySywgM0ssICw0SywgT3IgNUsgICAgICAlc-KVkSclKE8sUCxPLFAsTykpCiAgICBtbGFrdSgnJXPilZEgJXM1ICVz4pWRICVzTW9yZSBGcmllbmRzLCBNb3JlIFBvc3NpYmxlIFJlc3VsdHMgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczYgJXPilZEgJXNUYXAgVGFyZ2V0IFByb2ZpbGUvQ292ZXIgUGhvdG8gICAgICAgICAgICAgICAgICAgICAgJXPilZEnJShPLFAsTyxQLE8pKQogICAgbWxha3UoJyVz4pWRICVzNyAlc-KVkSAlc3NlZSBVUkwvTGluayBBYm92ZSwgVGhlcmUgaXMgXCBpZCA9IDEwMDAxeHhcICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczggJXPilZEgJXNXZWxsLCB0aGF0cyBhIHRhcmdldCBJRCByZWFkeSB0byBjcmFjayAgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczkgJXPilZEgJXNPcGVuIFRlcm11eC9MaW51eCB0aGVuIHByb2NlZWQgdG8gdGhlIENyYWNrIFByb2Nlc3MgJXPilZEnJShPLFAsTyxQLE8pKQogICAgbWxha3UoJyVz4pWg4pWQ4pWQ4pWQ4pWp4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdJyUoTykpCiAgICBwcmludCgnJXPilZEnJShPKSkKZGVmIHR1dG9yX2NyYWNrKCk6CiAgICBtbGFrdSgnJXPilaDilZDilZDilZDilabilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnJShPKSkKICAgIG1sYWt1KCclc-KVkSAlczEgJXPilZEgJXNNZXRob2QgQXBpIDogRmFzdCBCdXQgRWFzeSBQcm9jZXNzIFNwYW0gICAgICAgICAgICAlc-KVkSclKE8sUCxPLFAsTykpCiAgICBtbGFrdSgnJXPilZEgJXMyICVz4pWRICVzTWV0aG9kIE1iYXNpYyA6IFRoZSBwcm9jZXNzIGlzIHF1aXRlIGZhc3QsIHJhcmVseSBzcGFtbWVkICAlc-KVkSclKE8sUCxPLFAsTykpCiAgICBtbGFrdSgnJXPilZEgJXMzICVz4pWRICVzTWV0aG9kIE1vYmlsZSA6IFNsb3cgUHJvY2VzcywgUHJvYmFibHkgT0sgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVkSAlczQgJXPilZEgJXNDcmFjayBVc2luZyBEYXRhIFF1b3RhIChOb3QgU3VwcG9ydCBXaWZpKSAgJXPilZEnJShPLFAsTyxQLE8pKQogICAgbWxha3UoJyVz4pWRICVzNSAlc-KVkSAlc0lmIFJlc3VsdHMgRG8gTm90IEFwcGVhciBXaGlsZSBUaGUgQ3JhY2sgSXMgUnVubmluZyAgICAgICAlc-KVkSclKE8sUCxPLFAsTykpCiAgICBtbGFrdSgnJXPilZEgJXM2ICVz4pWRICVzVHVybiBPbiBBaXJwbGFuZSBNb2RlIE9ubHkgNSBTZWNvbmRzICAgICAgICAgICAgICAgICAgICVz4pWRJyUoTyxQLE8sUCxPKSkKICAgIG1sYWt1KCclc-KVoOKVkOKVkOKVkOKVqeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnSclKE8pKQogICAgcHJpbnQoJyVz4pWRJyUoTykpCmRlZiB2YXJfYXV0aG9yKCk6CiAgICBtbGFrdSgnJXPilZTilZDilZDCrlsgJXNBdXRob3IgJiBUZWFtIFByb2plY3QgJXNdJyUoTyxQLE8pKQogICAgbWxha3UoJyVz4pWRJyUoTykpCiAgICBtbGFrdSgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0F1dGhvciA6JyUoTyxQLE8sUCkpCiAgICBtbGFrdSgnJXPilZEgICAgIOKAouKXjeKepCAlc0JhamluZ2FuLVonJShPLFApKQogICAgbWxha3UoJyVz4pWRICAgICDigKLil43inqQgJXNCYW5nc2F0LVhEJyUoTyxQKSkKICAgIG1sYWt1KCclc-KVkSclKE8pKQogICAgbWxha3UoJyVz4pWg4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNUZWFtIFByb2plY3QgJXNYTlNDT0RFJXMgOiclKE8sUCxPLFAsTyxQKSkKICAgIG1sYWt1KCclc-KVkSAgICAg4oCi4peN4p6kICVzQkFOR1NBVCclKE8sUCkpCiAgICBtbGFrdSgnJXPilZEgICAgIOKAouKXjeKepCAlc0JBTkdTQVQnJShPLFApKQogICAgbWxha3UoJyVz4pWRICAgICDigKLil43inqQgJXNCQU5HU0FUJyUoTyxQKSkKICAgIG1sYWt1KCclc-KVkSAgICAg4oCi4peN4p6kICVzQkFOR1NBVCclKE8sUCkpCiAgICBtbGFrdSgnJXPilZEgICAgIOKAouKXjeKepCAlc0JBTkdTQVQnJShPLFApKQogICAgbWxha3UoJyVz4pWRICAgICDigKLil43inqQgJXNCQU5HU0FUJyUoTyxQKSkKICAgIG1sYWt1KCclc-KVkSAgICAg4oCi4peN4p6kICVzQkFOR1NBVCclKE8sUCkpCiAgICBtbGFrdSgnJXPilZEgICAgIOKAouKXjeKepCAlc0JBTkdTQVQnJShPLFApKQogICAgbWxha3UoJyVz4pWRICAgICDigKLil43inqQgJXNCQU5HU0FUJyUoTyxQKSkKICAgIG1sYWt1KCclc-KVkSAgICAg4oCi4peN4p6kICVzQkFOR1NBVCclKE8sUCkpCiAgICBtbGFrdSgnJXPilZEgICAgIOKAouKXjeKepCAlc0JBTkdTQVQnJShPLFApKQogICAgbWxha3UoJyVz4pWRICAgICDigKLil43inqQgJXNCQU5HU0FUJyUoTyxQKSkKICAgIG1sYWt1KCclc-KVkSclKE8pKQpkZWYgdmFyX3VnZW4oKToKICAgIHByaW50KCIlc-KVoOKVkOKVkMKuWyVzMSVzXeKXjeKepCAlc0dldCBVc2VyIEFnZW50IiUoTyxQLE8sUCkpCiAgICBwcmludCgiJXPilaDilZDilZDCrlslczIlc13il43inqQgJXNDaGFuZ2UgVXNlciBBZ2VudCVzKCVzTWFudWFsJXMpIiUoTyxQLE8sUCxPLFAsTykpCiAgICBwcmludCgiJXPilaDilZDilZDCrlslczMlc13il43inqQgJXNDaGFuZ2UgVXNlciBBZ2VudCAlcyglc0FkanVzdCBIUCVzKSIlKE8sUCxPLFAsTyxQLE8pKQogICAgcHJpbnQoIiVz4pWg4pWQ4pWQwq5bJXM0JXNd4peN4p6kICVzRGVsZXRlIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkKICAgIHByaW50KCIlc-KVoOKVkOKVkMKuWyVzNSVzXeKXjeKepCAlc0NoZWNrIFVzZXIgQWdlbnQiJShPLFAsTyxQKSkKICAgIHByaW50KCIlc-KVoOKVkOKVkMKuWyVzMCVzXeKXjeKepCAlc1JldHVybiIlKE8sUCxPLFApKQpkZWYgc3RhcnRfbWV0aG9kKCk6CiAgICBwcmludCgnJXPilZEnJShPKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMSVzXeKXjeKepCAlc01ldGhvZCBBcGknJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMiVzXeKXjeKepCAlc01ldGhvZCBNYmFzaWMnJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVzMyVzXeKXjeKepCAlc01ldGhvZCBGcmVlIEZCJyUoTyxQLE8sUCkpCmRlZiBzdGFydF9tZXRob2RlenooKToKICAgIHByaW50KCclc-KVkSclKE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMxJXNd4peN4p6kICVzRmFzdCBDcmFjayAlc1slczYgUGFzcyVzXSclKE8sUCxPLFAsTyxQLE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMyJXNd4peN4p6kICVzU2xvdyBDcmFjayAlc1slczkgUGFzcyVzXSclKE8sUCxPLFAsTyxQLE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXMzJXNd4peN4p6kICVzVmVyeSBTbG93IENyYWNrICVzWyVzMTIgUGFzcyVzXSclKE8sUCxPLFAsTyxQLE8pKQogICAgcHJpbnQoJyVz4pWg4pWQ4pWQwq5bJXM0JXNd4peN4p6kICVzQ3JhY2sgUGFzc3dvcmQgQ29tYmluZSclKE8sUCxPLFApKQpkZWYgc3RhcnRlZCgpOgogICAgcHJpbnQoJyVz4pWRJyUoTykpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0NyYWNrIElzIFJ1bm5pbmcuLi4nJShPLFAsTyxQKSkKICAgIHByaW50KCclc-KVoOKVkOKVkMKuWyVz4oCiJXNd4peN4p6kICVzQWNjb3VudCBbT0tdIFNhdmVkIFRvIE9LLyVzLnR4dCclKE8sUCxPLFAsdGFuZ2dhbCkpCiAgICBwcmludCgnJXPilaDilZDilZDCrlslc-KAoiVzXeKXjeKepCAlc0FjY291bnQgW0NQXSBTYXZlZCBUbyBDUC8lcy50eHQnJShPLFAsTyxQLHRhbmdnYWwpKQogICAgcHJpbnQoJyVz4pWa4pWQ4pWQwq5bJXPigKIlc13il43inqQgJXNJZiBObyBSZXN1bHQgVHVybiBPZmYgQWlycGxhbmUgTW9kZSAxIFNlY29uZFxuJyUoTyxQLE8sUCkpCmRlZiBmb2xkZXIoKToKICAgIHRyeTpvcy5ta2RpcigiQ1AiKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeTpvcy5ta2RpcigiT0siKQogICAgZXhjZXB0OnBhc3MKaWYgX19uYW1lX189PSdfX21haW5fXyc6CiAgb3Muc3lzdGVtKCdnaXQgcHVsbCcpCiAgZm9sZGVyKCkKICBtZW51KCk"))))
